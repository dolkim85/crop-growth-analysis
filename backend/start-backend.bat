@echo off
echo ============================================================
echo π€ μ¤λ§νΈν ν•μ΄λΈλ¦¬λ“ AI λ°±μ—”λ“ μ„λ²„ μ‹μ‘
echo ============================================================
echo.

cd /d "%~dp0"

echo π“‚ ν„μ¬ λ””λ ‰ν† λ¦¬: %CD%
echo.

:: κ°€μƒν™κ²½ ν™•μΈ λ° μƒμ„±
if not exist "venv" (
    echo π”§ Python κ°€μƒν™κ²½ μƒμ„± μ¤‘...
    python -m venv venv
    if errorlevel 1 (
        echo β κ°€μƒν™κ²½ μƒμ„± μ‹¤ν¨. Pythonμ΄ μ„¤μΉλμ–΄ μλ”μ§€ ν™•μΈν•΄μ£Όμ„Έμ”.
        pause
        exit /b 1
    )
    echo β… κ°€μƒν™κ²½ μƒμ„± μ™„λ£
    echo.
)

:: κ°€μƒν™κ²½ ν™μ„±ν™”
echo π”„ κ°€μƒν™κ²½ ν™μ„±ν™”...
call venv\Scripts\activate.bat
if errorlevel 1 (
    echo β κ°€μƒν™κ²½ ν™μ„±ν™” μ‹¤ν¨
    pause
    exit /b 1
)

:: μμ΅΄μ„± μ„¤μΉ
echo π“¦ Python ν¨ν‚¤μ§€ μ„¤μΉ μ¤‘...
pip install -r requirements.txt
if errorlevel 1 (
    echo β ν¨ν‚¤μ§€ μ„¤μΉ μ‹¤ν¨
    echo π’΅ requirements.txt νμΌμ΄ μλ”μ§€ ν™•μΈν•΄μ£Όμ„Έμ”.
    pause
    exit /b 1
)

:: μ—…λ΅λ“ ν΄λ” μƒμ„±
if not exist "uploads" (
    echo π“ μ—…λ΅λ“ ν΄λ” μƒμ„±...
    mkdir uploads
)

echo.
echo ============================================================
echo β… ν™κ²½ μ„¤μ • μ™„λ£
echo ============================================================
echo π ν•μ΄λΈλ¦¬λ“ λ¨λ“: λ‹¤μ¤‘ ν¬νΈ μλ™ κ°μ§€
echo π”§ ν¬νΈ μ¶©λ μ‹ μλ™μΌλ΅ λ‹¤λ¥Έ ν¬νΈ μ‹λ„
echo β΅ ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ AI ν΄λ°± μ§€μ›
echo ============================================================
echo.

:: Flask μ„λ²„ μ‹μ‘
echo π€ AI λ°±μ—”λ“ μ„λ²„ μ‹μ‘ μ¤‘...
python run.py

echo.
echo μ„λ²„κ°€ μΆ…λ£λμ—μµλ‹λ‹¤.
pause 