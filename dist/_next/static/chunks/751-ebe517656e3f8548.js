"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[751],{9862:(e,t,a)=>{a.d(t,{y:()=>i});var s=a(49509);let r=()=>{let e=window.location.origin;return{google:{clientId:s.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID||"your-google-client-id",redirectUri:s.env.NEXT_PUBLIC_GOOGLE_REDIRECT_URI||"".concat(e,"/auth/google/callback")},kakao:{clientId:s.env.NEXT_PUBLIC_KAKAO_CLIENT_ID||"your-kakao-client-id",redirectUri:s.env.NEXT_PUBLIC_KAKAO_REDIRECT_URI||"".concat(e,"/auth/kakao/callback")},naver:{clientId:s.env.NEXT_PUBLIC_NAVER_CLIENT_ID||"your-naver-client-id",redirectUri:s.env.NEXT_PUBLIC_NAVER_REDIRECT_URI||"".concat(e,"/auth/naver/callback")}}},n={loginWithGoogle:()=>{let e=r(),t="https://accounts.google.com/oauth/authorize?"+"client_id=".concat(e.google.clientId,"&")+"redirect_uri=".concat(encodeURIComponent(e.google.redirectUri),"&")+"response_type=code&scope=openid email profile&access_type=offline";window.location.href=t},loginWithKakao:()=>{let e=r();if(window.Kakao)window.Kakao.isInitialized()||window.Kakao.init(e.kakao.clientId),window.Kakao.Auth.authorize({redirectUri:e.kakao.redirectUri,scope:"profile_nickname,profile_image,account_email"});else{let t="https://kauth.kakao.com/oauth/authorize?"+"client_id=".concat(e.kakao.clientId,"&")+"redirect_uri=".concat(encodeURIComponent(e.kakao.redirectUri),"&")+"response_type=code&scope=profile_nickname,profile_image,account_email";window.location.href=t}},loginWithNaver:()=>{let e=r(),t=Math.random().toString(36).substring(2,15);sessionStorage.setItem("naver_state",t);let a="https://nid.naver.com/oauth2.0/authorize?"+"client_id=".concat(e.naver.clientId,"&")+"redirect_uri=".concat(encodeURIComponent(e.naver.redirectUri),"&")+"response_type=code&"+"state=".concat(t,"&")+"scope=name,email,profile_image";window.location.href=a}},o=[{id:"admin_spinmoll",email:"spinmoll@admin.com",name:"spinmoll (관리자)",provider:"email",avatar:"/placeholder.svg?height=40&width=40&text=Admin",role:"admin"}],l="crop_analysis_auth",i={login:async(e,t)=>{if(await new Promise(e=>setTimeout(e,1e3)),"spinmoll"===e&&"1234"===t){let e=o[0];return localStorage.setItem(l,JSON.stringify(e)),{success:!0,user:e}}let a=o.find(t=>t.email===e);return a&&t?(localStorage.setItem(l,JSON.stringify(a)),{success:!0,user:a}):{success:!1,error:"이메일 또는 비밀번호가 올바르지 않습니다."}},signup:async(e,t,a)=>{if(await new Promise(e=>setTimeout(e,1e3)),o.some(t=>t.email===e))return{success:!1,error:"이미 존재하는 이메일입니다."};let s={id:Math.random().toString(36).substr(2,9),email:e,name:a,provider:"email",role:"user"};return o.push(s),localStorage.setItem(l,JSON.stringify(s)),{success:!0,user:s}},socialLogin:async e=>{try{switch(e){case"google":n.loginWithGoogle();break;case"kakao":n.loginWithKakao();break;case"naver":n.loginWithNaver()}return{success:!0}}catch(t){return console.error("".concat(e," 로그인 오류:"),t),{success:!1,error:"".concat(e," 로그인에 실패했습니다.")}}},handleSocialCallback:async(e,t,a)=>{try{await new Promise(e=>setTimeout(e,1e3));let t={id:Math.random().toString(36).substr(2,9),email:"user@".concat(e,".com"),name:"".concat(e," 사용자"),provider:e,avatar:"/placeholder.svg?height=40&width=40&text=".concat(e.charAt(0).toUpperCase())};return o.push(t),localStorage.setItem(l,JSON.stringify(t)),{success:!0,user:t}}catch(e){return console.error("소셜 로그인 콜백 처리 오류:",e),{success:!1,error:"소셜 로그인 처리 중 오류가 발생했습니다."}}},logout:()=>{localStorage.removeItem(l),sessionStorage.removeItem(l),sessionStorage.removeItem("naver_state"),window.location.href="/"},getCurrentUser:()=>{try{let e=localStorage.getItem(l);return e?JSON.parse(e):null}catch(e){return null}}}},22751:(e,t,a)=>{a.d(t,{Navbar:()=>J});var s=a(95155),r=a(12115),n=a(97168),o=a(78513),l=a(53999);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.bL,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});i.displayName=o.bL.displayName;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o._V,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",a),...r})});c.displayName=o._V.displayName;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.H4,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});d.displayName=o.H4.displayName;var m=a(84114),u=a(13052),f=a(5196),p=a(9428);let x=m.bL,h=m.l9;m.YJ,m.ZL,m.Pb,m.z6,r.forwardRef((e,t)=>{let{className:a,inset:r,children:n,...o}=e;return(0,s.jsxs)(m.ZP,{ref:t,className:(0,l.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",a),...o,children:[n,(0,s.jsx)(u.A,{className:"ml-auto h-4 w-4"})]})}).displayName=m.ZP.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(m.G5,{ref:t,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=m.G5.displayName;let g=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(m.ZL,{children:(0,s.jsx)(m.UC,{ref:t,sideOffset:r,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});g.displayName=m.UC.displayName;let v=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(m.q7,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",a),...n})});v.displayName=m.q7.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:n,...o}=e;return(0,s.jsxs)(m.H_,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...o,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(m.VF,{children:(0,s.jsx)(f.A,{className:"h-4 w-4"})})}),r]})}).displayName=m.H_.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(m.hN,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(m.VF,{children:(0,s.jsx)(p.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=m.hN.displayName,r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(m.JU,{ref:t,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...n})}).displayName=m.JU.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(m.wv,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=m.wv.displayName;var N=a(33384),y=a(72713),b=a(71007),j=a(34835),w=a(6874),_=a.n(w),k=a(94861),I=a(62232),C=a(54416);let A=I.bL;I.l9;let R=I.ZL;I.bm;let U=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(I.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});U.displayName=I.hJ.displayName;let E=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(R,{children:[(0,s.jsx)(U,{}),(0,s.jsxs)(I.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,s.jsxs)(I.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(C.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});E.displayName=I.UC.displayName;let S=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};S.displayName="DialogHeader";let L=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};L.displayName="DialogFooter";let z=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(I.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});z.displayName=I.hE.displayName;let P=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(I.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});P.displayName=I.VY.displayName;var T=a(35695);function O(e){let{isOpen:t,onClose:a}=e,{logout:o,user:l}=(0,k.A)(),i=(0,T.useRouter)(),[c,d]=(0,r.useState)(!1);return(0,s.jsx)(A,{open:t,onOpenChange:a,children:(0,s.jsxs)(E,{className:"sm:max-w-md",children:[(0,s.jsxs)(S,{children:[(0,s.jsxs)(z,{className:"flex items-center gap-2",children:[(0,s.jsx)(j.A,{className:"h-5 w-5 text-red-600"}),"로그아웃"]}),(0,s.jsx)(P,{className:"text-left",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("span",{children:"정말 로그아웃 하시겠습니까?"}),l&&(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:l.name}),"admin"===l.role&&(0,s.jsx)("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded",children:"관리자"})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500 block",children:l.email})]})]})})]}),(0,s.jsxs)(L,{className:"flex flex-row justify-end gap-2 sm:justify-end",children:[(0,s.jsx)(n.$,{variant:"outline",onClick:a,disabled:c,children:"취소"}),(0,s.jsx)(n.$,{variant:"destructive",onClick:()=>{d(!0),o(),setTimeout(()=>{i.push("/"),d(!1),a()},500)},disabled:c,className:"flex items-center gap-2",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"로그아웃 중..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),"로그아웃"]})})]})]})})}var F=a(88145);function J(){let{user:e,isAuthenticated:t}=(0,k.A)(),[a,o]=(0,r.useState)(!1);return(0,s.jsx)("nav",{className:"bg-white shadow-sm border-b border-green-200",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsxs)(_(),{href:"/",className:"flex items-center gap-2",children:[(0,s.jsx)(N.A,{className:"h-8 w-8 text-green-600"}),(0,s.jsx)("span",{className:"text-xl font-bold text-green-800",children:"스마트팜 분석"})]}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_(),{href:"/analysis",children:(0,s.jsxs)(n.$,{variant:"ghost",className:"flex items-center gap-2",children:[(0,s.jsx)(y.A,{className:"h-4 w-4"}),"작물 성장 분석"]})}),(0,s.jsxs)(x,{children:[(0,s.jsx)(h,{asChild:!0,children:(0,s.jsxs)(n.$,{variant:"ghost",className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-lg",children:[(0,s.jsxs)(i,{className:"h-8 w-8",children:[(0,s.jsx)(c,{src:(null==e?void 0:e.avatar)||"/placeholder.svg"}),(0,s.jsx)(d,{className:"bg-gray-200",children:(0,s.jsx)(b.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start",children:[(0,s.jsx)("span",{className:"text-sm text-gray-700",children:(null==e?void 0:e.name)||"사용자"}),(null==e?void 0:e.role)==="admin"&&(0,s.jsx)(F.E,{variant:"secondary",className:"text-xs bg-red-100 text-red-700",children:"관리자"})]})]})}),(0,s.jsxs)(g,{align:"end",className:"w-48",children:[(null==e?void 0:e.role)==="admin"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(v,{className:"cursor-pointer",children:[(0,s.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"관리자 패널"]}),(0,s.jsxs)(v,{className:"cursor-pointer",children:[(0,s.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"사용자 관리"]}),(0,s.jsx)("div",{className:"border-t my-1"})]}),(0,s.jsxs)(v,{className:"cursor-pointer",children:[(0,s.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"프로필 설정"]}),(0,s.jsx)("div",{className:"border-t my-1"}),(0,s.jsxs)(v,{onClick:()=>o(!0),className:"cursor-pointer text-red-600 focus:text-red-600 focus:bg-red-50",children:[(0,s.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"로그아웃"]})]})]}),(0,s.jsx)(O,{isOpen:a,onClose:()=>o(!1)}),t&&(0,s.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>o(!0),className:"flex items-center gap-2 text-red-600 border-red-300 hover:bg-red-50",children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),"로그아웃"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_(),{href:"/login",children:(0,s.jsx)(n.$,{variant:"ghost",children:"로그인"})}),(0,s.jsx)(_(),{href:"/signup",children:(0,s.jsx)(n.$,{className:"bg-green-600 hover:bg-green-700",children:"회원가입"})})]})})]})})})}},53999:(e,t,a)=>{a.d(t,{cn:()=>n});var s=a(52596),r=a(39688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},88145:(e,t,a)=>{a.d(t,{E:()=>l});var s=a(95155);a(12115);var r=a(74466),n=a(53999);let o=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)(o({variant:a}),t),...r})}},94861:(e,t,a)=>{a.d(t,{A:()=>i,AuthProvider:()=>l});var s=a(95155),r=a(12115),n=a(9862);let o=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,r.useState)(null),[i,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{l(n.y.getCurrentUser()),c(!1)},[]);let d=async(e,t)=>{let a=await n.y.login(e,t);return a.success&&a.user&&l(a.user),{success:a.success,error:a.error}},m=async(e,t,a)=>{let s=await n.y.signup(e,t,a);return s.success&&s.user&&l(s.user),{success:s.success,error:s.error}},u=async e=>{let t=await n.y.socialLogin(e);return t.success&&t.user&&l(t.user),{success:t.success,error:t.error}};return(0,s.jsx)(o.Provider,{value:{user:a,isAuthenticated:!!a,login:d,signup:m,socialLogin:u,logout:()=>{n.y.logout(),l(null),localStorage.removeItem("crop_analysis_auth")},loading:i},children:t})}function i(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},97168:(e,t,a)=>{a.d(t,{$:()=>c});var s=a(95155),r=a(12115),n=a(66634),o=a(74466),l=a(53999);let i=(0,o.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:a,variant:r,size:o,asChild:c=!1,...d}=e,m=c?n.DX:"button";return(0,s.jsx)(m,{className:(0,l.cn)(i({variant:r,size:o,className:a})),ref:t,...d})});c.displayName="Button"}}]);