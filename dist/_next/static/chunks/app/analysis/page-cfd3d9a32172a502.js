(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{34964:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>d,av:()=>o,j7:()=>c,tU:()=>r});var t=a(95155),l=a(12115),n=a(83479),i=a(53999);let r=n.bL,c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.B8,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...l})});c.displayName=n.B8.displayName;let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.l9,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...l})});d.displayName=n.l9.displayName;let o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.UC,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...l})});o.displayName=n.UC.displayName},38499:(e,s,a)=>{Promise.resolve().then(a.bind(a,87495))},76037:(e,s,a)=>{"use strict";a.d(s,{w:()=>r});var t=a(95155),l=a(12115),n=a(14050),i=a(53999);let r=l.forwardRef((e,s)=>{let{className:a,orientation:l="horizontal",decorative:r=!0,...c}=e;return(0,t.jsx)(n.b,{ref:s,decorative:r,orientation:l,className:(0,i.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",a),...c})});r.displayName=n.b.displayName},82714:(e,s,a)=>{"use strict";a.d(s,{J:()=>d});var t=a(95155),l=a(12115),n=a(72797),i=a(74466),r=a(53999);let c=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.b,{ref:s,className:(0,r.cn)(c(),a),...l})});d.displayName=n.b.displayName},87495:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>eu});var t=a(95155),l=a(12115),n=a(94861),i=a(35695),r=a(22751),c=a(97168),d=a(88482),o=a(95784),m=a(89852),x=a(82714),h=a(88145),u=a(88216),j=a(53999);let g=l.forwardRef((e,s)=>{let{className:a,value:l,...n}=e;return(0,t.jsx)(u.bL,{ref:s,className:(0,j.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...n,children:(0,t.jsx)(u.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});g.displayName=u.bL.displayName;var p=a(76037),N=a(34964),v=a(33384),f=a(53904),y=a(72713),b=a(33109),w=a(44992),A=a(35562),S=a(40646),C=a(84355),D=a(54213),R=a(48691),T=a(62098),I=a(71539),k=a(29869),E=a(62525),_=a(54416),F=a(85690),O=a(4229),L=a(84616),Z=a(18979),M=a(91788),J=a(81284),U=a(1243),H=a(14186),z=a(95139);let W={"plant-health-basic":{id:"plant-health-basic",name:"TensorFlow 고급 로컬 모델 v2.0",accuracy:92,status:"online",analysisItems:[{id:"health",name:"건강 상태",type:"string",unit:""},{id:"disease",name:"질병 감지",type:"object",unit:""},{id:"growth",name:"성장 분석",type:"object",unit:""},{id:"nutrition",name:"영양 상태",type:"object",unit:""}]},"federated-hybrid":{id:"federated-hybrid",name:"연합학습 하이브리드 AI v1.0",accuracy:85,status:"online",analysisItems:[{id:"hybrid_health_score",name:"하이브리드 건강도",type:"number",unit:"%"},{id:"personalized_prediction",name:"개인화 예측",type:"object",unit:""},{id:"cluster_analysis",name:"클러스터 분석",type:"object",unit:""},{id:"learning_progress",name:"학습 진행도",type:"object",unit:""},{id:"farm_recommendations",name:"농가별 맞춤 권장사항",type:"string",unit:""}]},"mobilenet-plant":{id:"mobilenet-plant",name:"MobileNet 식물 분석 모델",accuracy:95,status:"online",analysisItems:[{id:"classification",name:"식물 분류",type:"string",unit:""},{id:"confidence",name:"신뢰도",type:"number",unit:"%"},{id:"leaf_analysis",name:"잎 분석",type:"object",unit:""}]},"resnet-diagnosis":{id:"resnet-diagnosis",name:"ResNet 식물 진단 모델",accuracy:94,status:"online",analysisItems:[{id:"diagnosis",name:"진단 결과",type:"string",unit:""},{id:"severity",name:"심각도",type:"number",unit:"점"},{id:"treatment",name:"치료 방안",type:"string",unit:""}]},"efficientnet-expert":{id:"efficientnet-expert",name:"EfficientNet 식물 전문가 모델",accuracy:96,status:"online",analysisItems:[{id:"expert_analysis",name:"전문가 분석",type:"object",unit:""},{id:"growth_stage",name:"성장 단계",type:"string",unit:""},{id:"care_recommendations",name:"관리 권장사항",type:"string",unit:""}]}},B={UPLOADED_IMAGES:"crop-analysis-uploaded-images",SAVED_ANALYSES:"crop-analysis-saved-analyses",CAMERAS:"crop-analysis-cameras",ENVIRONMENT_DATA:"crop-analysis-environment-data"},P={RAILWAY_URL:"https://dolkim85-smartfarm-backend-production.up.railway.app",TIMEOUT:15e3,RETRY_INTERVAL:1e4},$=(e,s)=>{if(!e)return"날짜 없음";let a="string"==typeof e?new Date(e):e;if(isNaN(a.getTime()))return"잘못된 날짜";let t=a.getFullYear(),l=a.getMonth()+1,n=a.getDate();return"HH:mm"===s?"".concat(a.getHours().toString().padStart(2,"0"),":").concat(a.getMinutes().toString().padStart(2,"0")):"".concat(t,"년 ").concat(l,"월 ").concat(n,"일")},V=()=>{let[e,s]=(0,l.useState)("checking"),a=async()=>{try{s("checking"),console.log("\uD83D\uDE80 온라인 백엔드 서버 연결 시작..."),console.log("\uD83D\uDCE1 요청 URL:","".concat(P.RAILWAY_URL,"/api/v1/health"));let e=new AbortController,t=setTimeout(()=>{console.log("⏰ 백엔드 연결 타임아웃"),e.abort()},P.TIMEOUT),l=await fetch("".concat(P.RAILWAY_URL,"/api/v1/health"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","Cache-Control":"no-cache"},signal:e.signal,mode:"cors",credentials:"omit"});if(clearTimeout(t),console.log("\uD83D\uDCCA 백엔드 응답 상태:",l.status),l.ok){let e=await l.json();if(console.log("✅ Railway 온라인 백엔드 연결 성공!",e),"initializing"===e.status){console.log("\uD83D\uDD04 서버 초기화 중... 진행률:",e.progress+"%"),s("checking"),setTimeout(()=>{console.log("\uD83D\uDD04 서버 초기화 완료 대기 중... 재시도"),a()},5e3);return}try{localStorage.setItem("BACKEND_URL",P.RAILWAY_URL),localStorage.setItem("BACKEND_MODE","online"),localStorage.setItem("BACKEND_STATUS","connected")}catch(e){console.warn("온라인 서버 정보 저장 실패:",e)}s("connected"),console.log("\uD83C\uDF89 프로덕션 온라인 모드 활성화!");return}throw Error("Railway 서버 응답 오류: HTTP ".concat(l.status," - ").concat(l.statusText))}catch(n){var e,t,l;console.error("❌ Railway 백엔드 연결 실패:",n),"AbortError"===n.name?console.log("⏰ 백엔드 연결 타임아웃 - 서버 응답 시간 초과"):(null===(e=n.message)||void 0===e?void 0:e.includes("CORS"))?console.log("\uD83D\uDEAB CORS 오류 - 브라우저 보안 정책 문제"):(null===(t=n.message)||void 0===t?void 0:t.includes("NetworkError"))||(null===(l=n.message)||void 0===l?void 0:l.includes("Failed to fetch"))?console.log("\uD83C\uDF10 네트워크 오류 - 인터넷 연결 또는 서버 문제"):console.log("❓ 알 수 없는 오류:",n.message),console.log("\uD83D\uDCA5 온라인 백엔드 서버에 연결할 수 없습니다. Railway 서버 상태를 확인하세요."),s("disconnected"),console.error("\uD83D\uDEA8 백엔드 서버 연결 실패 - 클라이언트 모드로 전환됨"),console.log("\uD83D\uDD04 10초 후 자동 재연결 시도..."),setTimeout(()=>{console.log("\uD83D\uDD04 백엔드 재연결 시도..."),a()},P.RETRY_INTERVAL)}},t=async s=>{if("connected"!==e)throw Error("백엔드 서버에 연결되지 않았습니다");console.log("\uD83D\uDCE4 Railway 백엔드로 분석 요청 전송...");let a=await fetch("".concat(P.RAILWAY_URL,"/api/v1/analyze"),{method:"POST",body:s,headers:{Accept:"application/json","Cache-Control":"no-cache"},mode:"cors",credentials:"omit"});if(console.log("\uD83D\uDCCA 백엔드 응답 상태:",a.status),!a.ok)throw Error("HTTP ".concat(a.status,": ").concat(a.statusText));let t=await a.json();return console.log("\uD83D\uDCE5 백엔드 응답 데이터:",t),t},n=async s=>{if("connected"!==e)throw Error("백엔드 서버에 연결되지 않았습니다");console.log("\uD83D\uDCE4 Railway 백엔드로 연합학습 분석 요청 전송...");let a=await fetch("".concat(P.RAILWAY_URL,"/api/v1/federated/analyze"),{method:"POST",body:s,headers:{Accept:"application/json","Cache-Control":"no-cache"},mode:"cors",credentials:"omit"});if(console.log("\uD83D\uDCCA 백엔드 응답 상태:",a.status),!a.ok)throw Error("HTTP ".concat(a.status,": ").concat(a.statusText));let t=await a.json();return console.log("\uD83D\uDCE5 백엔드 응답 데이터:",t),t},i=async s=>{if("connected"===e)try{await fetch("".concat(P.RAILWAY_URL,"/api/v1/federated/feedback"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}catch(e){console.error("피드백 전송 실패:",e)}};return(0,l.useEffect)(()=>{a()},[]),{connectionStatus:e,checkBackendConnection:a,sendAnalysisRequest:t,sendFederatedAnalysisRequest:n,sendFeedback:i}},Y=e=>{let{data:s,showTimestamp:a=!0,compact:l=!1}=e;return l?(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"내부온도"}),(0,t.jsxs)("div",{className:"font-bold text-red-600",children:[s.innerTemperature.toFixed(1),"\xb0C"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"습도"}),(0,t.jsxs)("div",{className:"font-bold text-blue-600",children:[s.innerHumidity.toFixed(0),"%"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"pH"}),(0,t.jsx)("div",{className:"font-bold text-green-600",children:s.ph.toFixed(1)})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"EC"}),(0,t.jsxs)("div",{className:"font-bold text-purple-600",children:[s.ec.toFixed(1),"dS/m"]})]})]}):(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"text-lg flex items-center gap-2",children:["\uD83C\uDF21️ 환경 데이터",a&&(0,t.jsx)(h.E,{variant:"secondary",className:"text-xs",children:s.timestamp.toLocaleTimeString("ko-KR")})]})}),(0,t.jsxs)(d.Wu,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 rounded-lg",children:[(0,t.jsx)(w.A,{className:"h-5 w-5 text-red-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"내부온도"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-red-600",children:[s.innerTemperature.toFixed(1),"\xb0C"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-orange-50 rounded-lg",children:[(0,t.jsx)(w.A,{className:"h-5 w-5 text-orange-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"외부온도"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-orange-600",children:[s.outerTemperature.toFixed(1),"\xb0C"]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg",children:[(0,t.jsx)(R.A,{className:"h-5 w-5 text-blue-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"내부습도"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[s.innerHumidity.toFixed(0),"%"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-cyan-50 rounded-lg",children:[(0,t.jsx)(w.A,{className:"h-5 w-5 text-cyan-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"근권온도"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-cyan-600",children:[s.rootZoneTemperature.toFixed(1),"\xb0C"]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 rounded-lg",children:[(0,t.jsx)(T.A,{className:"h-5 w-5 text-yellow-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"일사량"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-yellow-600",children:[s.solarRadiation.toFixed(0),"W/m\xb2"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-teal-50 rounded-lg",children:[(0,t.jsx)(I.A,{className:"h-5 w-5 text-teal-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"용존산소"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-teal-600",children:[s.dissolvedOxygen.toFixed(1),"mg/L"]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-lg",children:[(0,t.jsx)("div",{className:"h-5 w-5 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"pH"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"산성도"}),(0,t.jsx)("div",{className:"text-lg font-bold text-green-600",children:s.ph.toFixed(1)})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-purple-50 rounded-lg",children:[(0,t.jsx)("div",{className:"h-5 w-5 bg-purple-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"EC"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"전기전도도"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:[s.ec.toFixed(1),"dS/m"]})]})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"환경 상태 평가"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(h.E,{variant:s.innerTemperature>=18&&s.innerTemperature<=30?"default":"destructive",className:"text-xs",children:["온도: ",s.innerTemperature>=18&&s.innerTemperature<=30?"적정":"주의"]}),(0,t.jsxs)(h.E,{variant:s.innerHumidity>=50&&s.innerHumidity<=80?"default":"destructive",className:"text-xs",children:["습도: ",s.innerHumidity>=50&&s.innerHumidity<=80?"적정":"주의"]}),(0,t.jsxs)(h.E,{variant:s.ph>=6&&s.ph<=7.5?"default":"destructive",className:"text-xs",children:["pH: ",s.ph>=6&&s.ph<=7.5?"적정":"주의"]}),(0,t.jsxs)(h.E,{variant:s.ec>=1&&s.ec<=2.5?"default":"destructive",className:"text-xs",children:["EC: ",s.ec>=1&&s.ec<=2.5?"적정":"주의"]})]})]})]})]})},X=(0,a(74466).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),K=l.forwardRef((e,s)=>{let{className:a,variant:l,...n}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,j.cn)(X({variant:l}),a),...n})});K.displayName="Alert",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("h5",{ref:s,className:(0,j.cn)("mb-1 font-medium leading-none tracking-tight",a),...l})}).displayName="AlertTitle";let G=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,j.cn)("text-sm [&_p]:leading-relaxed",a),...l})});G.displayName="AlertDescription";var q=a(27213),Q=a(40133),ee=a(54481);let es=e=>{let{onAnalysisComplete:s,maxImages:a=10,allowedFormats:n=["image/jpeg","image/png","image/webp"],maxFileSize:i=0xa00000}=e,[r,o]=(0,l.useState)([]),[m,x]=(0,l.useState)(!1),[u,j]=(0,l.useState)(0),[p,v]=(0,l.useState)([]),[f,y]=(0,l.useState)(null),[b,w]=(0,l.useState)(null),{analyzeImages:A,isConnected:S}=V(),D=(0,l.useCallback)(e=>{if(!e)return;let s=[];Array.from(e).forEach((t,l)=>{if(!n.includes(t.type)){y("지원하지 않는 파일 형식입니다: ".concat(t.name));return}if(t.size>i){y("파일 크기가 너무 큽니다: ".concat(t.name," (최대 ").concat(i/1024/1024,"MB)"));return}if(r.length+s.length>=a){y("최대 ".concat(a,"개의 이미지만 업로드할 수 있습니다"));return}let c=new FileReader;c.onload=a=>{var n;let i={id:"img_".concat(Date.now(),"_").concat(l),file:t,preview:null===(n=a.target)||void 0===n?void 0:n.result,uploadedAt:new Date,analyzed:!1};s.push(i),s.length===Array.from(e).length&&(o(e=>[...e,...s]),y(null))},c.readAsDataURL(t)})},[r.length,a,n,i]),R=(0,l.useCallback)(e=>{o(s=>s.filter(s=>s.id!==e)),v(s=>s.filter(s=>s.imageId!==e))},[]),T=(0,l.useCallback)(()=>{o([]),v([]),w(null),y(null)},[]),I=(0,l.useCallback)(async()=>{if(0===r.length){y("분석할 이미지를 먼저 업로드해주세요");return}if(!S){y("백엔드 서버에 연결할 수 없습니다");return}x(!0),j(0),y(null);try{let e=await A(r,e=>{j(e)});v(e),o(e=>e.map(e=>({...e,analyzed:!0}))),null==s||s(e)}catch(e){y(e instanceof Error?e.message:"분석 중 오류가 발생했습니다")}finally{x(!1),j(0)}},[r,S,A,s]),_=(0,l.useCallback)(e=>{e.preventDefault()},[]),F=(0,l.useCallback)(e=>{e.preventDefault(),D(e.dataTransfer.files)},[D]);return(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(C.A,{className:"h-5 w-5"}),"이미지 분석",(0,t.jsxs)(h.E,{variant:"secondary",className:"ml-auto",children:[r.length,"/",a]})]})}),(0,t.jsxs)(d.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors",onDragOver:_,onDrop:F,children:[(0,t.jsx)(k.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-lg font-medium text-gray-700 mb-2",children:"이미지를 드래그하거나 클릭하여 업로드"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["JPEG, PNG, WebP 형식 지원 (최대 ",i/1024/1024,"MB)"]}),(0,t.jsx)("input",{type:"file",multiple:!0,accept:n.join(","),onChange:e=>D(e.target.files),className:"hidden",id:"image-upload"}),(0,t.jsx)(c.$,{asChild:!0,variant:"outline",children:(0,t.jsxs)("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[(0,t.jsx)(q.A,{className:"h-4 w-4 mr-2"}),"파일 선택"]})})]}),f&&(0,t.jsx)(K,{variant:"destructive",children:(0,t.jsx)(G,{children:f})}),r.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"업로드된 이미지"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.$,{onClick:I,disabled:m||!S,className:"bg-green-600 hover:bg-green-700",children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Q.A,{className:"h-4 w-4 mr-2 animate-spin"}),"분석 중..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"분석 시작"]})}),(0,t.jsxs)(c.$,{onClick:T,variant:"outline",size:"sm",children:[(0,t.jsx)(E.A,{className:"h-4 w-4 mr-2"}),"전체 삭제"]})]})]}),m&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"분석 진행률"}),(0,t.jsxs)("span",{children:[u.toFixed(0),"%"]})]}),(0,t.jsx)(g,{value:u,className:"w-full"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map((e,s)=>(0,t.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>w(s),children:[(0,t.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:(0,t.jsx)("img",{src:e.preview,alt:"업로드된 이미지 ".concat(s+1),className:"w-full h-full object-cover"})}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all rounded-lg flex items-center justify-center",children:(0,t.jsx)(ee.A,{className:"h-6 w-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),(0,t.jsx)("div",{className:"absolute top-2 right-2 flex gap-1",children:e.analyzed&&(0,t.jsx)(h.E,{variant:"default",className:"text-xs",children:"분석완료"})}),(0,t.jsx)(c.$,{onClick:s=>{s.stopPropagation(),R(e.id)},variant:"destructive",size:"sm",className:"absolute top-2 left-2 h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsx)(E.A,{className:"h-3 w-3"})})]},e.id))})]}),p.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"분석 결과"}),(0,t.jsxs)(N.tU,{defaultValue:"summary",className:"w-full",children:[(0,t.jsxs)(N.j7,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(N.Xi,{value:"summary",children:"요약"}),(0,t.jsx)(N.Xi,{value:"details",children:"상세 결과"})]}),(0,t.jsx)(N.av,{value:"summary",className:"space-y-4",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map((e,s)=>(0,t.jsx)(d.Zp,{children:(0,t.jsxs)(d.Wu,{className:"p-4",children:[(0,t.jsxs)("div",{className:"text-sm font-medium mb-2",children:["이미지 ",s+1]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"건강도:"}),(0,t.jsx)(h.E,{variant:"좋음"===e.health?"default":"destructive",children:e.health})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"성장도:"}),(0,t.jsx)("span",{className:"font-medium",children:e.growth})]}),(0,t.jsx)("div",{className:"text-xs text-gray-600 mt-2",children:e.recommend})]})]})},e.imageId))})}),(0,t.jsx)(N.av,{value:"details",className:"space-y-4",children:p.map((e,s)=>(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"text-base",children:["이미지 ",s+1," 상세 분석"]})}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium mb-2",children:"기본 정보"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"건강 상태:"}),(0,t.jsx)(h.E,{variant:"좋음"===e.health?"default":"destructive",children:e.health})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"성장 상태:"}),(0,t.jsx)("span",{children:e.growth})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"분석 시간:"}),(0,t.jsx)("span",{className:"text-xs text-gray-600",children:e.analyzedAt.toLocaleString("ko-KR")})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium mb-2",children:"권장사항"}),(0,t.jsx)("div",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:e.recommend})]})]})})]},e.imageId))})]})]})]})]})};var ea=a(43757);let et=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(ea.bL,{className:(0,j.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...l,ref:s,children:(0,t.jsx)(ea.zi,{className:(0,j.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});et.displayName=ea.bL.displayName;var el=a(19302),en=a(36683),ei=a(75525),er=a(79397),ec=a(85339);let ed=e=>{let{onStatusChange:s,autoJoin:a=!1,shareData:n=!0}=e,[i,r]=(0,l.useState)(!1),[o,m]=(0,l.useState)({isActive:!1,currentRound:0,totalRounds:10,participants:0,accuracy:0,loss:0,lastUpdated:new Date}),[u,j]=(0,l.useState)([]),[p,v]=(0,l.useState)(n),[f,y]=(0,l.useState)("disconnected"),b=(0,l.useCallback)(async()=>{y("connecting");try{await new Promise(e=>setTimeout(e,2e3)),y("connected"),r(!0);let e=[{id:"node_1",name:"스마트팜 A",location:"경기도 화성시",status:"active",contribution:85,lastSeen:new Date(Date.now()-3e5),dataPoints:1250},{id:"node_2",name:"스마트팜 B",location:"충남 논산시",status:"active",contribution:92,lastSeen:new Date(Date.now()-12e4),dataPoints:1580},{id:"node_3",name:"스마트팜 C",location:"전남 나주시",status:"inactive",contribution:78,lastSeen:new Date(Date.now()-18e5),dataPoints:950}];j(e)}catch(e){y("disconnected"),console.error("연합학습 네트워크 연결 실패:",e)}},[]),w=(0,l.useCallback)(async()=>{if(!i)return;let e={isActive:!0,currentRound:1,totalRounds:10,participants:u.filter(e=>"active"===e.status).length+1,accuracy:.65,loss:.45,lastUpdated:new Date};m(e),null==s||s(e);for(let a=1;a<=10;a++){await new Promise(e=>setTimeout(e,3e3));let t={...e,currentRound:a,accuracy:Math.min(.95,.65+.03*a),loss:Math.max(.05,.45-.04*a),lastUpdated:new Date};m(t),null==s||s(t)}let a={...e,isActive:!1,currentRound:10,accuracy:.95,loss:.05,lastUpdated:new Date};m(a),null==s||s(a)},[i,u,s]),A=(0,l.useCallback)(()=>{r(!1),y("disconnected"),j([]),m(e=>({...e,isActive:!1}))},[]);return(0,l.useEffect)(()=>{a&&"disconnected"===f&&b()},[a,f,b]),(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(el.A,{className:"h-5 w-5"}),"연합학습 네트워크",(0,t.jsx)(h.E,{variant:"connected"===f?"default":"secondary",className:"ml-auto",children:"connected"===f?"연결됨":"connecting"===f?"연결 중...":"연결 안됨"})]})}),(0,t.jsxs)(d.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-3 w-3 rounded-full ".concat("connected"===f?"bg-green-500":"connecting"===f?"bg-yellow-500 animate-pulse":"bg-gray-400")}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"connected"===f?"네트워크에 연결됨":"connecting"===f?"연결 중...":"네트워크 연결 안됨"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:i?"".concat(u.filter(e=>"active"===e.status).length+1,"개 노드 참여 중"):"연합학습에 참여하지 않음"})]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:i?(0,t.jsxs)(c.$,{onClick:A,variant:"outline",children:[(0,t.jsx)(en.A,{className:"h-4 w-4 mr-2"}),"네트워크 나가기"]}):(0,t.jsxs)(c.$,{onClick:b,disabled:"connecting"===f,className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(el.A,{className:"h-4 w-4 mr-2"}),"네트워크 참여"]})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(ei.A,{className:"h-5 w-5 text-blue-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{htmlFor:"data-sharing",className:"font-medium",children:"데이터 공유"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"학습 데이터를 네트워크와 안전하게 공유"})]})]}),(0,t.jsx)(et,{id:"data-sharing",checked:p,onCheckedChange:v,disabled:!i})]}),i&&(0,t.jsxs)(N.tU,{defaultValue:"training",className:"w-full",children:[(0,t.jsxs)(N.j7,{className:"grid w-full grid-cols-3",children:[(0,t.jsx)(N.Xi,{value:"training",children:"학습 현황"}),(0,t.jsx)(N.Xi,{value:"nodes",children:"참여 노드"}),(0,t.jsx)(N.Xi,{value:"history",children:"학습 기록"})]}),(0,t.jsxs)(N.av,{value:"training",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{className:"pb-3",children:(0,t.jsxs)(d.ZB,{className:"text-base flex items-center gap-2",children:[(0,t.jsx)(er.A,{className:"h-4 w-4"}),"학습 진행률"]})}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"라운드"}),(0,t.jsxs)("span",{children:[o.currentRound,"/",o.totalRounds]})]}),(0,t.jsx)(g,{value:o.currentRound/o.totalRounds*100,className:"w-full"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-600",children:[(0,t.jsxs)("span",{children:["참여자: ",o.participants,"명"]}),(0,t.jsx)("span",{children:o.isActive?"학습 중":"대기 중"})]})]})})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{className:"pb-3",children:(0,t.jsxs)(d.ZB,{className:"text-base flex items-center gap-2",children:[(0,t.jsx)(S.A,{className:"h-4 w-4"}),"모델 성능"]})}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"정확도"}),(0,t.jsxs)("span",{className:"font-medium text-green-600",children:[(100*o.accuracy).toFixed(1),"%"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"손실값"}),(0,t.jsx)("span",{className:"font-medium text-red-600",children:o.loss.toFixed(3)})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-600",children:["마지막 업데이트: ",o.lastUpdated.toLocaleString("ko-KR")]})]})})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.$,{onClick:w,disabled:o.isActive,className:"bg-green-600 hover:bg-green-700",children:o.isActive?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(er.A,{className:"h-4 w-4 mr-2 animate-pulse"}),"학습 진행 중..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"학습 시작"]})}),(0,t.jsxs)(c.$,{variant:"outline",disabled:!o.isActive,children:[(0,t.jsx)(M.A,{className:"h-4 w-4 mr-2"}),"모델 다운로드"]})]})]}),(0,t.jsx)(N.av,{value:"nodes",className:"space-y-4",children:(0,t.jsx)("div",{className:"grid gap-4",children:u.map(e=>(0,t.jsx)(d.Zp,{children:(0,t.jsxs)(d.Wu,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-3 w-3 rounded-full ".concat("active"===e.status?"bg-green-500":"bg-gray-400")}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:e.location})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-sm font-medium",children:["기여도: ",e.contribution,"%"]}),(0,t.jsxs)("div",{className:"text-xs text-gray-600",children:["데이터: ",e.dataPoints.toLocaleString(),"개"]})]})]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(H.A,{className:"h-3 w-3"}),"마지막 접속: ",e.lastSeen.toLocaleString("ko-KR")]}),(0,t.jsx)(h.E,{variant:"active"===e.status?"default":"secondary",children:"active"===e.status?"활성":"비활성"})]})]})},e.id))})}),(0,t.jsxs)(N.av,{value:"history",className:"space-y-4",children:[(0,t.jsxs)(K,{children:[(0,t.jsx)(ec.A,{className:"h-4 w-4"}),(0,t.jsx)(G,{children:"연합학습 기록은 개인정보 보호를 위해 암호화되어 저장됩니다. 학습 성능 지표만 공유되며, 실제 데이터는 각 노드에서 안전하게 관리됩니다."})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsx)(d.ZB,{className:"text-base",children:"최근 학습 세션"})}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"세션 #1"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"2024-12-25 14:30 - 15:45 (1시간 15분)"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-green-600",children:"완료"}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"정확도: 94.2%"})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"세션 #2"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"2024-12-24 09:15 - 10:30 (1시간 15분)"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-green-600",children:"완료"}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"정확도: 91.8%"})]})]})]})})]})]})]})]})]})},eo=()=>{let[e,s]=(0,l.useState)(!1),a=(0,l.useCallback)(()=>{s(!0)},[]),n=(0,l.useCallback)(()=>{s(!1)},[]);return(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(C.A,{className:"h-5 w-5"}),"카메라 관리",(0,t.jsx)(h.E,{variant:e?"default":"secondary",className:"ml-auto",children:e?"실시간":"중지됨"})]})}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"relative bg-gray-900 rounded-lg overflow-hidden aspect-video",children:!e&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center text-white",children:[(0,t.jsx)(C.A,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{className:"text-lg font-medium",children:"카메라가 연결되지 않음"})]})})}),(0,t.jsx)("div",{className:"flex items-center justify-center gap-2",children:e?(0,t.jsx)(c.$,{onClick:n,variant:"outline",children:"중지"}):(0,t.jsxs)(c.$,{onClick:a,className:"bg-green-600 hover:bg-green-700",children:[(0,t.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"카메라 시작"]})})]})})]})};var em=a(57434);let ex=e=>{let{analysisResults:s=[],environmentData:a=[],uploadedImages:n=[],onDataImported:i}=e,[r,o]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!1),[u,j]=(0,l.useState)(null),[g,p]=(0,l.useState)({used:0,total:0,percentage:0}),v=(0,l.useCallback)(async()=>{try{let e={analysisResults:s,environmentData:a,uploadedImages:n.map(e=>({...e,file:null,preview:e.preview})),savedAt:new Date().toISOString()};localStorage.setItem(B.ANALYSIS_RESULTS,JSON.stringify(e.analysisResults)),localStorage.setItem(B.ENVIRONMENT_DATA,JSON.stringify(e.environmentData)),localStorage.setItem(B.UPLOADED_IMAGES,JSON.stringify(e.uploadedImages)),localStorage.setItem(B.LAST_SAVED,e.savedAt),j(new Date);let t=JSON.stringify(e).length;p({used:t,total:5242880,percentage:Math.min(t/5242880*100,100)})}catch(e){console.error("데이터 저장 실패:",e)}},[s,a,n]),y=(0,l.useCallback)(()=>{try{let e=localStorage.getItem(B.ANALYSIS_RESULTS),s=localStorage.getItem(B.ENVIRONMENT_DATA),a=localStorage.getItem(B.UPLOADED_IMAGES),t=localStorage.getItem(B.LAST_SAVED),l={analysisResults:e?JSON.parse(e):[],environmentData:s?JSON.parse(s):[],uploadedImages:a?JSON.parse(a):[],savedAt:t?new Date(t):null};l.savedAt&&j(l.savedAt),null==i||i(l)}catch(e){console.error("데이터 불러오기 실패:",e)}},[i]),b=(0,l.useCallback)(async()=>{o(!0);try{let e={version:"1.0",exportedAt:new Date().toISOString(),data:{analysisResults:s,environmentData:a,uploadedImages:n.map(e=>({id:e.id,preview:e.preview,uploadedAt:e.uploadedAt,analyzed:e.analyzed}))},metadata:{totalAnalyses:s.length,totalEnvironmentRecords:a.length,totalImages:n.length}},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),l=URL.createObjectURL(t),i=document.createElement("a");i.href=l,i.download="smartfarm_data_".concat(new Date().toISOString().slice(0,10),".json"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l)}catch(e){console.error("데이터 내보내기 실패:",e)}finally{o(!1)}},[s,a,n]),w=(0,l.useCallback)(e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!a)return;x(!0);let t=new FileReader;t.onload=e=>{try{var s;let a=JSON.parse(null===(s=e.target)||void 0===s?void 0:s.result);a.data&&(null==i||i(a.data))}catch(e){console.error("데이터 가져오기 실패:",e)}finally{x(!1)}},t.readAsText(a)},[i]),A=(0,l.useCallback)(()=>{confirm("모든 데이터를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.")&&(localStorage.removeItem(B.ANALYSIS_RESULTS),localStorage.removeItem(B.ENVIRONMENT_DATA),localStorage.removeItem(B.UPLOADED_IMAGES),localStorage.removeItem(B.LAST_SAVED),j(null),p({used:0,total:0,percentage:0}),null==i||i({analysisResults:[],environmentData:[],uploadedImages:[]}))},[i]),C=(0,l.useCallback)(()=>{if(0===s.length)return;let e=new Blob([[["이미지ID","건강상태","성장상태","권장사항","분석시간"],...s.map(e=>[e.imageId,e.health,e.growth,e.recommend,e.analyzedAt.toLocaleString("ko-KR")])].map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download="분석결과_".concat(new Date().toISOString().slice(0,10),".csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(a)},[s]),R=(0,l.useCallback)(()=>{if(0===a.length)return;let e=new Blob([[["시간","내부온도","외부온도","내부습도","근권온도","일사량","용존산소","pH","EC"],...a.map(e=>[e.timestamp.toLocaleString("ko-KR"),e.innerTemperature,e.outerTemperature,e.innerHumidity,e.rootZoneTemperature,e.solarRadiation,e.dissolvedOxygen,e.ph,e.ec])].map(e=>e.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="환경데이터_".concat(new Date().toISOString().slice(0,10),".csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)},[a]);return(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(D.A,{className:"h-5 w-5"}),"데이터 관리",u&&(0,t.jsxs)(h.E,{variant:"secondary",className:"ml-auto text-xs",children:["마지막 저장: ",u.toLocaleString("ko-KR")]})]})}),(0,t.jsxs)(d.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(d.Zp,{children:(0,t.jsxs)(d.Wu,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"분석 결과"})]})}),(0,t.jsx)(d.Zp,{children:(0,t.jsxs)(d.Wu,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:a.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"환경 데이터"})]})}),(0,t.jsx)(d.Zp,{children:(0,t.jsxs)(d.Wu,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:n.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"업로드된 이미지"})]})})]}),g.used>0&&(0,t.jsxs)(K,{children:[(0,t.jsx)(ec.A,{className:"h-4 w-4"}),(0,t.jsxs)(G,{children:["스토리지 사용량: ",(g.used/1024).toFixed(1),"KB / ",(g.total/1024/1024).toFixed(1),"MB (",g.percentage.toFixed(1),"%)"]})]}),(0,t.jsxs)(N.tU,{defaultValue:"save-load",className:"w-full",children:[(0,t.jsxs)(N.j7,{className:"grid w-full grid-cols-3",children:[(0,t.jsx)(N.Xi,{value:"save-load",children:"저장/불러오기"}),(0,t.jsx)(N.Xi,{value:"export",children:"내보내기"}),(0,t.jsx)(N.Xi,{value:"import",children:"가져오기"})]}),(0,t.jsxs)(N.av,{value:"save-load",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)(c.$,{onClick:v,className:"bg-green-600 hover:bg-green-700",children:[(0,t.jsx)(O.A,{className:"h-4 w-4 mr-2"}),"로컬 저장"]}),(0,t.jsxs)(c.$,{onClick:y,variant:"outline",children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"로컬 불러오기"]})]}),(0,t.jsxs)(K,{children:[(0,t.jsx)(S.A,{className:"h-4 w-4"}),(0,t.jsx)(G,{children:"데이터는 브라우저의 로컬 스토리지에 안전하게 저장됩니다. 브라우저를 종료해도 데이터가 유지됩니다."})]})]}),(0,t.jsxs)(N.av,{value:"export",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(c.$,{onClick:b,disabled:r,className:"bg-blue-600 hover:bg-blue-700",children:r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-2 animate-spin"}),"내보내는 중..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.A,{className:"h-4 w-4 mr-2"}),"JSON 내보내기"]})}),(0,t.jsxs)(c.$,{onClick:C,disabled:0===s.length,variant:"outline",children:[(0,t.jsx)(em.A,{className:"h-4 w-4 mr-2"}),"분석결과 CSV"]})]}),(0,t.jsxs)(c.$,{onClick:R,disabled:0===a.length,variant:"outline",className:"w-full",children:[(0,t.jsx)(em.A,{className:"h-4 w-4 mr-2"}),"환경데이터 CSV"]}),(0,t.jsxs)(K,{children:[(0,t.jsx)(ec.A,{className:"h-4 w-4"}),(0,t.jsx)(G,{children:"JSON 파일은 모든 데이터를 포함하며, CSV 파일은 표 형태로 특정 데이터만 포함합니다."})]})]}),(0,t.jsx)(N.av,{value:"import",className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"file",accept:".json",onChange:w,disabled:m,className:"hidden",id:"import-file"}),(0,t.jsx)(c.$,{asChild:!0,variant:"outline",className:"w-full",children:(0,t.jsx)("label",{htmlFor:"import-file",className:"cursor-pointer",children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-2 animate-spin"}),"가져오는 중..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"JSON 파일 가져오기"]})})})]}),(0,t.jsxs)(K,{children:[(0,t.jsx)(ec.A,{className:"h-4 w-4"}),(0,t.jsx)(G,{children:"이전에 내보낸 JSON 파일만 가져올 수 있습니다. 가져오기 시 기존 데이터는 덮어씌워집니다."})]})]})})]}),(0,t.jsx)("div",{className:"pt-4 border-t",children:(0,t.jsxs)(c.$,{onClick:A,variant:"destructive",className:"w-full",children:[(0,t.jsx)(E.A,{className:"h-4 w-4 mr-2"}),"모든 데이터 삭제"]})})]})]})};function eh(){var e,s,a,i,r;let{user:u}=(0,n.A)(),j=(null==u?void 0:u.id)||"anonymous",{connectionStatus:P,sendAnalysisRequest:X}=V(),[K,G]=(0,l.useState)([]),[q,Q]=(0,l.useState)(!0),[ee,ea]=(0,l.useState)("plant-health-basic"),[et,el]=(0,l.useState)([]),[en,ei]=(0,l.useState)(""),[er,ec]=(0,l.useState)(!1),[em,eh]=(0,l.useState)(null),[eu,ej]=(0,l.useState)([]),[eg,ep]=(0,l.useState)([]),[eN,ev]=(0,l.useState)([]),[ef,ey]=(0,l.useState)(""),[eb,ew]=(0,l.useState)(""),[eA,eS]=(0,l.useState)({innerTemperature:25.5,outerTemperature:22.3,innerHumidity:68,rootZoneTemperature:24.2,solarRadiation:420,ph:6.5,ec:1.8,dissolvedOxygen:7.2,timestamp:new Date}),[eC,eD]=(0,l.useState)(!0),[eR,eT]=(0,l.useState)(new Date),[eI,ek]=(0,l.useState)("12:00"),[eE,e_]=(0,l.useState)([]),[eF,eO]=(0,l.useState)(!0),[eL,eZ]=(0,l.useState)("online"),[eM,eJ]=(0,l.useState)("checking"),[eU,eH]=(0,l.useState)(!1),[ez,eW]=(0,l.useState)(null),[eB,eP]=(0,l.useState)({plantType:"all",dateFrom:"",dateTo:""}),[e$,eV]=(0,l.useState)(""),[eY,eX]=(0,l.useState)([]),[eK,eG]=(0,l.useState)(""),[eq,eQ]=(0,l.useState)("all"),[e0,e1]=(0,l.useState)(""),[e2,e5]=(0,l.useState)(""),[e4,e6]=(0,l.useState)([]),[e3,e8]=(0,l.useState)({}),[e9,e7]=(0,l.useState)([]),[se,ss]=(0,l.useState)(null),[sa,st]=(0,l.useState)(!1),[sl,sn]=(0,l.useState)(""),[si,sr]=(0,l.useState)("demo_farm_001"),[sc,sd]=(0,l.useState)({facility_type:"smart_greenhouse",location:"gyeonggi",crop_type:"tomato",experience_years:5}),[so,sm]=(0,l.useState)(null),[sx,sh]=(0,l.useState)(85),[su,sj]=(0,l.useState)(0),[sg,sp]=(0,l.useState)(!1),[sN,sv]=(0,l.useState)({innerTemperature:25.5,outerTemperature:22.3,innerHumidity:68,rootZoneTemperature:24.2,solarRadiation:420,ph:6.5,ec:1.8,dissolvedOxygen:7.2,timestamp:new Date}),sf=[{id:"tomato",name:"토마토",icon:"\uD83C\uDF45"},{id:"cucumber",name:"오이",icon:"\uD83E\uDD52"},{id:"pepper",name:"고추",icon:"\uD83C\uDF36️"},{id:"lettuce",name:"상추",icon:"\uD83E\uDD6C"},{id:"strawberry",name:"딸기",icon:"\uD83C\uDF53"},{id:"spinach",name:"시금치",icon:"\uD83E\uDD6C"},{id:"cabbage",name:"배추",icon:"\uD83E\uDD6C"},{id:"carrot",name:"당근",icon:"\uD83E\uDD55"},{id:"potato",name:"감자",icon:"\uD83E\uDD54"},{id:"onion",name:"양파",icon:"\uD83E\uDDC5"},{id:"garlic",name:"마늘",icon:"\uD83E\uDDC4"},{id:"corn",name:"옥수수",icon:"\uD83C\uDF3D"}];(0,l.useEffect)(()=>{sy()},[]),(0,l.useEffect)(()=>{s_()},[]),(0,l.useEffect)(()=>{let e=setInterval(sE,1e4);return()=>clearInterval(e)},[]);let sy=async()=>{console.log("\uD83D\uDE80 스마트팜 분석 시스템 초기화 시작");try{sb();let e=sw();e_(e),await sA(),await sS(),await sI(),await sk()}catch(e){console.error("초기화 중 오류 발생:",e)}finally{Q(!1),console.log("✅ 스마트팜 분석 시스템 초기화 완료")}},sb=()=>{try{let e=localStorage.getItem(B.UPLOADED_IMAGES);if(e){let s=JSON.parse(e).filter(e=>e.userId===j);G(s)}let s=localStorage.getItem(B.SAVED_ANALYSES);if(s){let e=JSON.parse(s).filter(e=>e.userId===j);ep(e)}let a=localStorage.getItem(B.CAMERAS);if(a){let e=JSON.parse(a).filter(e=>e.userId===j);ev(e)}}catch(e){console.error("로컬 스토리지 로드 실패:",e)}},sw=()=>{let e=[],s=new Date;for(let a=30;a>=0;a--){let t=new Date(s.getTime()-864e5*a),l=20+10*Math.sin((t.getMonth()-3)*Math.PI/6);e.push({innerTemperature:l+6*Math.random()-3,outerTemperature:l+10*Math.random()-5,innerHumidity:60+20*Math.random(),rootZoneTemperature:l-2+4*Math.random(),solarRadiation:300+400*Math.random(),ph:6+1.5*Math.random(),ec:1.2+ +Math.random(),dissolvedOxygen:6+2*Math.random(),timestamp:t})}return e},sA=async()=>{try{console.log("\uD83E\uDD16 연합학습 모델 로딩 시작");let e=localStorage.getItem("federated_training_count"),s=e?parseInt(e):0;sj(s),sh(sC(s,!1)),await sD(),console.log("✅ 연합학습 모델 로딩 완료")}catch(e){console.error("연합학습 모델 로딩 실패:",e)}},sS=async()=>{try{console.log("\uD83D\uDCCA 농가 분석 현황 로딩"),sm({total_farms:1247,active_farms:892,clusters:{smart_greenhouse:324,traditional_greenhouse:198,hydroponic:156,soil_based:214},performance:{accuracy_improvement:12.5,yield_increase:8.3,resource_efficiency:15.7}}),console.log("✅ 농가 분석 현황 로딩 완료")}catch(e){console.error("농가 분석 현황 로딩 실패:",e)}},sC=(e,s)=>{let a;return a=85+Math.min(.5*e,10),s&&e>=10&&(a+=2),Math.min(a,97)},sD=async()=>{try{console.log("\uD83C\uDFED 농가 분류 진행 중...");let e="smart_greenhouse";"traditional_greenhouse"===sc.facility_type?e="traditional_greenhouse":"lettuce"===sc.crop_type||"spinach"===sc.crop_type?e="hydroponic":sc.experience_years<3&&(e="soil_based"),console.log("✅ 농가 분류 완료: ".concat(e)),sd(s=>({...s,cluster_type:e}))}catch(e){console.error("농가 분류 실패:",e)}},sR=async()=>{if(!eF){alert("AI 엔진이 준비되지 않았습니다. 잠시 후 다시 시도해주세요.");return}if(0===(eu||[]).length){alert("분석할 이미지를 선택해주세요.");return}if(!en){alert("식물 종류를 선택해주세요.");return}ec(!0);try{let e=(K||[]).filter(e=>(eu||[]).includes(e.id)),s=eC?eA:sW(eR,eI);console.log("\uD83D\uDD0D 연합학습 하이브리드 AI 분석 시작"),console.log("\uD83C\uDF21️ 분석에 사용할 환경 데이터:",s);let a={};if("connected"===eM){console.log("\uD83C\uDF10 온라인 백엔드 연합학습 분석 모드");let t=new FormData;e.forEach(e=>{t.append("images",e.file)}),t.append("farmId",si),t.append("farmInfo",JSON.stringify(sc)),t.append("environmentData",JSON.stringify(s)),t.append("modelId",ee),t.append("analysisItems",JSON.stringify(et)),t.append("plantType",en),console.log("\uD83D\uDCE4 Railway 백엔드로 연합학습 분석 요청 전송..."),console.log("\uD83D\uDCCB 전송 데이터:",{imageCount:e.length,farmId:si,farmInfo:sc,modelId:ee,analysisItems:et,plantType:en,environmentData:s});let l=await fetch("".concat("https://dolkim85-smartfarm-backend-production.up.railway.app","/api/v1/federated/analyze"),{method:"POST",body:t,headers:{Accept:"application/json","Cache-Control":"no-cache"},mode:"cors",credentials:"omit"});if(console.log("\uD83D\uDCCA 백엔드 응답 상태:",l.status),!l.ok)throw Error("HTTP ".concat(l.status,": ").concat(l.statusText));let n=await l.json();if(console.log("\uD83D\uDCE5 백엔드 응답 데이터:",n),"success"===n.status)a=n.data,n.data.farm_analytics&&sm(n.data.farm_analytics),console.log("✅ 백엔드 연합학습 분석 완료:",a);else throw Error(n.message)}else{console.log("\uD83D\uDCBB 클라이언트 사이드 AI 분석 모드"),await sZ(e,s);return}let t={};void 0!==a.hybrid_health_score&&(t.plantHealth=a.hybrid_health_score),a.personalized_prediction&&(t.personalizedPrediction=a.personalized_prediction),a.cluster_analysis&&(t.clusterAnalysis=a.cluster_analysis),a.existing_ai_result&&(t.existingAI=a.existing_ai_result);let l={modelId:ee,selectedAnalysisItems:et,analysisData:t,environmentData:s,condition:a.hybrid_health_score>80?"우수":a.hybrid_health_score>60?"양호":a.hybrid_health_score>40?"보통":"주의",recommendations:a.combined_recommendations||["연합학습 AI 분석이 완료되었습니다."],date:new Date().toISOString(),comparedImages:eu};eh(l),console.log("✅ 연합학습 분석 최종 결과:",l)}catch(a){console.error("❌ 연합학습 분석 실패:",a),alert("분석 중 오류가 발생했습니다: ".concat(a)),console.log("\uD83D\uDD04 기존 AI로 폴백 분석 시작");let e=(K||[]).filter(e=>(eu||[]).includes(e.id)),s=eC?eA:sW(eR,eI);await sZ(e,s)}finally{ec(!1)}},sT=async e=>{try{console.log("\uD83D\uDCDD 사용자 피드백 제출:",e);let s=su+1;sj(s),localStorage.setItem("federated_training_count",s.toString());let a=sC(s,s>=10);sh(a),"connected"===eM&&await fetch("".concat("https://dolkim85-smartfarm-backend-production.up.railway.app","/api/v1/federated/feedback"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({farmId:si,rating:e,analysisId:null==em?void 0:em.date,environmentData:null==em?void 0:em.environmentData})}),console.log("✅ 피드백 제출 완료 - 모델 성능 향상!"),alert("피드백이 제출되었습니다! 연합학습 정확도: ".concat(a.toFixed(1),"%"))}catch(e){console.error("피드백 제출 실패:",e),alert("피드백 제출 중 오류가 발생했습니다.")}},sI=async()=>{try{for(let e of(console.log("\uD83D\uDE80 AI 엔진 초기화 시작"),Object.keys(W)))console.log("\uD83D\uDCE6 ".concat(W[e].name," 로딩...")),await new Promise(e=>setTimeout(e,500));eO(!0),eZ("online"),console.log("✅ AI 엔진 초기화 완료")}catch(e){console.error("AI 엔진 초기화 실패:",e),eO(!1),eZ("offline")}},sk=async()=>{try{eJ("checking"),console.log("\uD83D\uDE80 온라인 백엔드 서버 연결 시작...");let e="https://dolkim85-smartfarm-backend-production.up.railway.app";console.log("\uD83C\uDF10 Railway 온라인 서버 연결 중..."),console.log("\uD83D\uDCE1 요청 URL:","".concat(e,"/api/v1/health"));let s=new AbortController,a=setTimeout(()=>{console.log("⏰ 백엔드 연결 타임아웃 (15초)"),s.abort()},15e3),t=await fetch("".concat(e,"/api/v1/health"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","Cache-Control":"no-cache"},signal:s.signal,mode:"cors",credentials:"omit"});if(clearTimeout(a),console.log("\uD83D\uDCCA 백엔드 응답 상태:",t.status),console.log("\uD83D\uDCCB 백엔드 응답 헤더:",Object.fromEntries(t.headers.entries())),t.ok){let s=await t.json();if(console.log("✅ Railway 온라인 백엔드 연결 성공!",s),"initializing"===s.status){console.log("\uD83D\uDD04 서버 초기화 중... 진행률:",s.progress+"%"),eJ("checking"),setTimeout(()=>{console.log("\uD83D\uDD04 서버 초기화 완료 대기 중... 재시도"),sk()},5e3);return}window.BACKEND_URL=e(window).BACKEND_MODE="online";try{localStorage.setItem("BACKEND_URL",e),localStorage.setItem("BACKEND_MODE","online"),localStorage.setItem("BACKEND_STATUS","connected")}catch(e){console.warn("온라인 서버 정보 저장 실패:",e)}eJ("connected"),console.log("\uD83C\uDF89 프로덕션 온라인 모드 활성화!"),console.log("✨ 백엔드 서버 연결 완료 - AI 분석 준비됨");return}throw Error("Railway 서버 응답 오류: HTTP ".concat(t.status," - ").concat(t.statusText))}catch(t){var e,s,a;console.error("❌ Railway 백엔드 연결 실패:",t),"AbortError"===t.name?console.log("⏰ 백엔드 연결 타임아웃 - 서버 응답 시간 초과"):(null===(e=t.message)||void 0===e?void 0:e.includes("CORS"))?console.log("\uD83D\uDEAB CORS 오류 - 브라우저 보안 정책 문제"):(null===(s=t.message)||void 0===s?void 0:s.includes("NetworkError"))||(null===(a=t.message)||void 0===a?void 0:a.includes("Failed to fetch"))?console.log("\uD83C\uDF10 네트워크 오류 - 인터넷 연결 또는 서버 문제"):console.log("❓ 알 수 없는 오류:",t.message),console.log("\uD83D\uDCA5 온라인 백엔드 서버에 연결할 수 없습니다. Railway 서버 상태를 확인하세요."),eJ("disconnected"),console.error("\uD83D\uDEA8 백엔드 서버 연결 실패 - 클라이언트 모드로 전환됨"),console.log("\uD83D\uDD04 10초 후 자동 재연결 시도..."),setTimeout(()=>{console.log("\uD83D\uDD04 백엔드 재연결 시도..."),sk()},1e4)}},sE=()=>{Math.random()>.95&&(eZ("maintenance"),setTimeout(()=>{eZ("online")},3e3))},s_=()=>{let e=setInterval(()=>{eS(e=>({...e,innerTemperature:e.innerTemperature+(Math.random()-.5)*.5,outerTemperature:e.outerTemperature+(Math.random()-.5)*1,innerHumidity:Math.max(30,Math.min(90,e.innerHumidity+(Math.random()-.5)*2)),rootZoneTemperature:e.rootZoneTemperature+(Math.random()-.5)*.3,solarRadiation:Math.max(0,e.solarRadiation+(Math.random()-.5)*50),ph:Math.max(5,Math.min(8,e.ph+(Math.random()-.5)*.1)),ec:Math.max(.5,Math.min(3,e.ec+(Math.random()-.5)*.05)),dissolvedOxygen:Math.max(4,Math.min(12,e.dissolvedOxygen+(Math.random()-.5)*.2)),timestamp:new Date}))},5e3);return()=>clearInterval(e)},sF=e=>{ej(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},sO=(e,s)=>{el(a=>s?[...a,e]:a.filter(s=>s!==e))},sL=async()=>{if(!eF){alert("AI 엔진이 준비되지 않았습니다. 잠시 후 다시 시도해주세요.");return}if(0===eu.length){alert("분석할 이미지를 선택해주세요.");return}if(!en){alert("식물 종류를 선택해주세요.");return}ec(!0);try{let e=K.filter(e=>eu.includes(e.id)),s=eC?eA:sW(eR,eI);if(console.log("\uD83D\uDD0D 하이브리드 AI 분석 시작"),console.log("\uD83C\uDF21️ 분석에 사용할 환경 데이터:",s),"connected"===eM){console.log("\uD83C\uDF10 온라인 백엔드 AI 분석 모드");let a=new FormData;e.forEach(e=>{a.append("images",e.file)}),a.append("modelId",ee),a.append("analysisItems",JSON.stringify(et)),a.append("environmentData",JSON.stringify(s)),a.append("plantType",en),console.log("\uD83D\uDCE4 Railway 백엔드로 분석 요청 전송..."),console.log("\uD83D\uDCCB 전송 데이터:",{imageCount:e.length,modelId:ee,analysisItems:et,plantType:en,environmentData:s});let t=await fetch("".concat("https://dolkim85-smartfarm-backend-production.up.railway.app","/api/v1/analyze"),{method:"POST",body:a,headers:{Accept:"application/json","Cache-Control":"no-cache"},mode:"cors",credentials:"omit"});if(console.log("\uD83D\uDCCA 백엔드 응답 상태:",t.status),!t.ok)throw Error("HTTP ".concat(t.status,": ").concat(t.statusText));let l=await t.json();if(console.log("\uD83D\uDCE5 백엔드 응답 데이터:",l),"success"===l.status){let e=l.data,a={};e.health&&(a.health=e.health),e.disease&&(a.disease=e.disease),e.growth&&(a.growth=e.growth),e.nutrition&&(a.nutrition=e.nutrition),e.classification&&(a.classification=e.classification),e.confidence&&(a.confidence=e.confidence),e.diagnosis&&(a.diagnosis=e.diagnosis),e.severity&&(a.severity=e.severity),e.treatment&&(a.treatment=e.treatment);let t={modelId:ee,selectedAnalysisItems:et,analysisData:a,environmentData:s,condition:e.condition||"양호",recommendations:e.recommendations||["AI 분석이 완료되었습니다."],date:new Date().toISOString(),comparedImages:eu};eh(t),console.log("✅ 온라인 백엔드 분석 완료:",t),alert("\uD83C\uDF89 온라인 AI 분석이 완료되었습니다!");return}throw Error(l.message||"백엔드 분석 실패")}console.log("\uD83D\uDCBB 클라이언트 사이드 AI 분석 모드"),await sZ(e,s)}catch(e){console.error("분석 중 오류:",e),alert("분석 중 오류가 발생했습니다.")}finally{ec(!1)}},sZ=async(e,s)=>{for(let a of(console.log("\uD83E\uDDE0 클라이언트 AI 엔진 실행"),console.log("\uD83C\uDF21️ 환경 데이터 연동:",s),e))console.log("\uD83D\uDCCA ".concat(a.file.name," 픽셀 분석 중...")),s&&(console.log("\uD83C\uDF21️ 분석 시점 환경 조건:"),console.log("   - 내부온도: ".concat(s.innerTemperature,"\xb0C")),console.log("   - 습도: ".concat(s.innerHumidity,"%")),console.log("   - pH: ".concat(s.ph)),console.log("   - EC: ".concat(s.ec,"dS/m"))),await new Promise(e=>setTimeout(e,1e3))},sM=async()=>{try{eZ("recovering"),await sI(),await sk(),alert("\uD83D\uDEE0️ AI 엔진이 복구되었습니다!")}catch(e){alert("❌ AI 엔진 복구에 실패했습니다")}},sJ=()=>{let e=eg||[];if("all"!==eB.plantType&&(e=e.filter(e=>e.plantType===eB.plantType)),eB.dateFrom){let s=new Date(eB.dateFrom+"T00:00:00");e=e.filter(e=>new Date(e.date)>=s)}if(eB.dateTo){let s=new Date(eB.dateTo+"T23:59:59");e=e.filter(e=>new Date(e.date)<=s)}if(e$){let s=e$.toLowerCase();e=e.filter(e=>{var a;return(null===(a=sf.find(s=>s.id===e.plantType))||void 0===a?void 0:a.name.toLowerCase().includes(s))||e.result.condition.toLowerCase().includes(s)||e.result.recommendations.some(e=>e.toLowerCase().includes(s))})}return e.sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime())},sU=(e,s)=>{e8(a=>({...a,[e]:{...a[e],interval:s}}))},sH=e=>{var s,a,t;let l=eN.find(s=>s.id===e);if(!l)return;let n=(null===(s=e3[e])||void 0===s?void 0:s.isActive)||!1;e8(s=>{var a;return{...s,[e]:{interval:(null===(a=s[e])||void 0===a?void 0:a.interval)||60,isActive:!n}}}),ev(s=>s.map(s=>s.id===e?{...s,isActive:!n}:s)),n?alert("".concat(l.name,"의 자동 촬영이 중지되었습니다.")):(null===(a=e3[e])||void 0===a||a.interval,setInterval(()=>{ev(s=>s.map(s=>{if(s.id===e&&s.isActive){let e={name:"auto_".concat(Date.now(),".jpg"),date:new Date,environmentData:{...eA}};return{...s,photos:[...s.photos,e]}}return s}))},5e3),alert("".concat(l.name,"의 자동 촬영이 시작되었습니다.\n간격: ").concat((null===(t=e3[e])||void 0===t?void 0:t.interval)||60,"분마다\n환경 데이터도 함께 저장됩니다.")))},sz=e=>{let s=eN.find(s=>s.id===e);if(s&&confirm('"'.concat(s.name,'" 카메라를 삭제하시겠습니까? 저장된 사진도 함께 삭제됩니다.'))){let s=eN.filter(s=>s.id!==e);ev(s),e8(s=>{let a={...s};return delete a[e],a}),se===e&&ss(null);try{localStorage.setItem(B.CAMERAS,JSON.stringify(s)),alert("카메라가 삭제되었습니다.")}catch(e){console.error("카메라 삭제 오류:",e)}}},sW=(e,s)=>{let[a,t]=s.split(":").map(Number),l=new Date(e);return l.setHours(a,t,0,0),((eE||[]).length>0?(eE||[]).reduce((e,s)=>{let a=Math.abs(e.timestamp.getTime()-l.getTime());return Math.abs(s.timestamp.getTime()-l.getTime())<a?s:e}):null)||eA},sB=e=>{var s;let a=eg.filter(s=>e4.includes(s.id)&&s.plantType===e),t=a.length>0?a.sort((e,s)=>new Date(e.date).getTime()-new Date(s.date).getTime()):eg.filter(s=>s.plantType===e).sort((e,s)=>new Date(e.date).getTime()-new Date(s.date).getTime());return 0===t.length?null:{plantName:(null===(s=sf.find(s=>s.id===e))||void 0===s?void 0:s.name)||e,totalAnalyses:t.length,dateRange:{start:$(new Date(t[0].date)),end:$(new Date(t[t.length-1].date))},healthTrend:t.map((e,s)=>{var a,t,l;return{date:$(new Date(e.date)),condition:e.result.condition,score:"양호"===e.result.condition?90+10*Math.random():"보통"===e.result.condition?60+20*Math.random():30+20*Math.random(),temperature:(null===(a=e.result.environmentData)||void 0===a?void 0:a.innerTemperature)||25,humidity:(null===(t=e.result.environmentData)||void 0===t?void 0:t.innerHumidity)||65,ph:(null===(l=e.result.environmentData)||void 0===l?void 0:l.ph)||6.5}}),recommendations:t.reduce((e,s)=>(s.result.recommendations.forEach(s=>{e.includes(s)||e.push(s)}),e),[]).slice(0,5)}};return q?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"V12.0 하이브리드 AI 시스템을 초기화하고 있습니다..."})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-50 p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsxs)("h1",{className:"text-4xl font-bold text-green-800 flex items-center justify-center gap-3",children:[(0,t.jsx)(v.A,{className:"h-10 w-10"}),"V11.0 전문가용 스마트팜 분석 시스템"]}),(0,t.jsx)("p",{className:"text-green-600",children:"전문가급 AI 기반 작물 모니터링 및 성장 분석 플랫폼"}),u&&(0,t.jsxs)("p",{className:"text-sm text-green-700",children:[(0,t.jsx)("span",{className:"font-medium",children:u.name}),"님의 전문 분석 대시보드"]}),(0,t.jsxs)("div",{className:"flex justify-center gap-2 mt-2",children:[(0,t.jsxs)(h.E,{variant:"online"===eL?"default":"destructive",children:["AI 엔진: ","online"===eL?"온라인":"maintenance"===eL?"점검중":"오프라인"]}),(0,t.jsxs)(h.E,{variant:"connected"===eM?"default":"secondary",children:["백엔드: ","connected"===eM?"연결됨":"checking"===eM?"확인중":"클라이언트 모드"]}),"online"!==eL&&(0,t.jsxs)(c.$,{size:"sm",variant:"outline",onClick:sM,children:[(0,t.jsx)(f.A,{className:"h-3 w-3 mr-1"}),"\uD83D\uDEE0️ 복구"]})]})]}),(0,t.jsxs)(d.Zp,{className:"border-gray-300 shadow-lg",children:[(0,t.jsx)(d.aR,{className:"bg-gradient-to-r from-blue-600 to-emerald-600 text-white",children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2 text-xl",children:[(0,t.jsx)(y.A,{className:"h-6 w-6"}),"전문가용 분석 대시보드",(0,t.jsx)(h.E,{variant:"secondary",className:"ml-2 text-blue-900",children:"Professional v11.0 UI"})]})}),(0,t.jsx)(d.Wu,{className:"p-0",children:(0,t.jsxs)(N.tU,{defaultValue:"analysis",className:"w-full",children:[(0,t.jsxs)(N.j7,{className:"grid w-full grid-cols-7 bg-gray-100 rounded-none border-b",children:[(0,t.jsx)(N.Xi,{value:"analysis",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.A,{className:"h-4 w-4"}),"실시간 분석"]})}),(0,t.jsx)(N.Xi,{value:"environment",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(w.A,{className:"h-4 w-4"}),"환경 데이터"]})}),(0,t.jsx)(N.Xi,{value:"image-analysis",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(A.A,{className:"h-4 w-4"}),"이미지 분석"]})}),(0,t.jsx)(N.Xi,{value:"federated",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(S.A,{className:"h-4 w-4"}),"연합학습"]})}),(0,t.jsx)(N.Xi,{value:"observation-camera",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(C.A,{className:"h-4 w-4"}),"카메라 관리"]})}),(0,t.jsx)(N.Xi,{value:"data-management",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(D.A,{className:"h-4 w-4"}),"데이터 관리"]})}),(0,t.jsx)(N.Xi,{value:"settings",className:"data-[state=active]:bg-white data-[state=active]:shadow-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"h-4 w-4"}),"시스템 설정"]})})]}),(0,t.jsxs)(N.av,{value:"analysis",className:"space-y-6 p-6",children:[(0,t.jsxs)(d.Zp,{className:"border-blue-200",children:[(0,t.jsx)(d.aR,{className:"bg-blue-50",children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2 text-blue-800",children:[(0,t.jsx)(b.A,{className:"h-5 w-5"}),"실시간 스마트팜 환경 데이터",(0,t.jsx)(h.E,{variant:"secondary",className:"ml-2",children:"online"===eL?"AI 엔진 온라인":"AI 엔진 오프라인"})]})}),(0,t.jsxs)(d.Wu,{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(z.S,{id:"current-data",checked:eC,onCheckedChange:e=>eD(!0===e)}),(0,t.jsx)(x.J,{htmlFor:"current-data",children:"현재 환경 데이터 사용"})]}),!eC&&(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{className:"text-sm",children:"날짜 선택"}),(0,t.jsx)(m.p,{type:"date",value:eR.toISOString().split("T")[0],onChange:e=>eT(new Date(e.target.value)),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{className:"text-sm",children:"시간 선택"}),(0,t.jsx)(m.p,{type:"time",value:eI,onChange:e=>ek(e.target.value),className:"mt-1"})]})]})]}),!eC&&(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,t.jsxs)("p",{children:["\uD83D\uDCC5 선택된 시간: ",$(eR)," ",eI]}),(0,t.jsxs)("p",{children:["\uD83C\uDF21️ 환경 상태: ",(0,t.jsx)("span",{className:"font-medium text-green-600",children:"적정"})]})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-4",children:(()=>{let e=eC?eA:sW(eR,eI);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)(w.A,{className:"h-4 w-4 text-red-500 mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"내부온도"})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-red-600",children:[e.innerTemperature.toFixed(1),"\xb0C"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)(w.A,{className:"h-4 w-4 text-red-400 mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"외부온도"})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-red-500",children:[e.outerTemperature.toFixed(1),"\xb0C"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)(w.A,{className:"h-4 w-4 text-orange-500 mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"근권온도"})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-orange-600",children:[e.rootZoneTemperature.toFixed(1),"\xb0C"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)(R.A,{className:"h-4 w-4 text-blue-500 mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"내부습도"})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[e.innerHumidity.toFixed(0),"%"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)(T.A,{className:"h-4 w-4 text-yellow-500 mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"일사량"})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-yellow-600",children:[e.solarRadiation.toFixed(0),"W/m\xb2"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"PH"})]}),(0,t.jsx)("div",{className:"text-lg font-bold text-green-600",children:e.ph.toFixed(1)})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)(I.A,{className:"h-4 w-4 text-purple-500 mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"EC"})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:[e.ec.toFixed(1),"dS/m"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-teal-500 rounded-full mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"DO"})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-teal-600",children:[e.dissolvedOxygen.toFixed(1),"mg/L"]})]})]})})()}),(0,t.jsx)("div",{className:"mt-4 text-center",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:eC?"마지막 업데이트: ".concat($(eA.timestamp)," ").concat($(eA.timestamp,"HH:mm")):"선택된 시간 데이터: ".concat($(eR)," ").concat(eI)})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(d.Zp,{className:"border-emerald-200",children:[(0,t.jsx)(d.aR,{className:"bg-emerald-50",children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2 text-emerald-800",children:[(0,t.jsx)(k.A,{className:"h-5 w-5"}),"이미지 업로드"]})}),(0,t.jsx)(d.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{htmlFor:"image-upload",className:"block text-sm font-medium mb-2",children:"이미지 파일 선택"}),(0,t.jsx)(m.p,{id:"image-upload",type:"file",accept:"image/*",multiple:!0,onChange:e=>{let s=e.target.files;s&&Array.from(s).forEach(e=>{if(e.type.startsWith("image/")){let s=Date.now().toString()+Math.random().toString(36).substr(2,9),a=URL.createObjectURL(e),t={id:s,file:e,url:a,timestamp:new Date,userId:j};G(e=>{let s=[...e,t];return localStorage.setItem(B.UPLOADED_IMAGES,JSON.stringify(s)),s})}})},className:"cursor-pointer"})]}),K.length>0?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(x.J,{className:"text-sm font-medium",children:["업로드된 이미지 (",K.length,"개)"]}),(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{G([]),ej([])},className:"text-red-600 hover:text-red-700",children:[(0,t.jsx)(E.A,{className:"h-3 w-3 mr-1"}),"전체 삭제"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3 max-h-96 overflow-y-auto",children:K.map(e=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)("div",{className:"border-2 rounded-lg overflow-hidden cursor-pointer transition-all ".concat(eu.includes(e.id)?"border-green-500 bg-green-50":"border-gray-200 hover:border-emerald-400"),onClick:()=>sF(e.id),children:[(0,t.jsx)("img",{src:e.url,alt:"업로드된 이미지",className:"w-full h-24 object-cover"}),eu.includes(e.id)&&(0,t.jsx)("div",{className:"absolute inset-0 bg-green-500 bg-opacity-20 flex items-center justify-center",children:(0,t.jsx)(S.A,{className:"h-6 w-6 text-green-700"})})]}),(0,t.jsx)(c.$,{variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 p-0 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",onClick:s=>{s.stopPropagation(),G(s=>s.filter(s=>s.id!==e.id)),ej(s=>s.filter(s=>s!==e.id))},children:(0,t.jsx)(_.A,{className:"h-3 w-3"})})]},e.id))})]}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(k.A,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{className:"text-sm",children:"아직 업로드된 이미지가 없습니다."}),(0,t.jsx)("p",{className:"text-xs",children:"위의 파일 선택 버튼을 사용해서 이미지를 업로드해주세요."})]})]})})]}),(0,t.jsxs)(d.Zp,{className:"border-purple-200",children:[(0,t.jsx)(d.aR,{className:"bg-purple-50",children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2 text-purple-800",children:[(0,t.jsx)(v.A,{className:"h-5 w-5"}),"분석 설정"]})}),(0,t.jsx)(d.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{className:"text-sm font-medium mb-2 block",children:"식물 종류"}),(0,t.jsxs)(o.l6,{value:en,onValueChange:ei,children:[(0,t.jsx)(o.bq,{children:(0,t.jsx)(o.yv,{placeholder:"식물 종류 선택"})}),(0,t.jsx)(o.gC,{children:sf.map(e=>(0,t.jsx)(o.eb,{value:e.id,children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{className:"text-sm font-medium mb-2 block",children:"AI 모델 선택"}),(0,t.jsxs)(o.l6,{value:ee,onValueChange:ea,children:[(0,t.jsx)(o.bq,{children:(0,t.jsx)(o.yv,{placeholder:"AI 모델 선택"})}),(0,t.jsx)(o.gC,{children:Object.entries(W).map(e=>{let[s,a]=e;return(0,t.jsx)(o.eb,{value:s,children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsx)("span",{children:a.name}),(0,t.jsxs)(h.E,{variant:"outline",className:"ml-2",children:[a.accuracy,"%"]})]})},s)})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{className:"text-sm font-medium mb-2 block",children:"분석 항목"}),(0,t.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:ee&&(null===(e=W[ee])||void 0===e?void 0:e.analysisItems.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(z.S,{id:e.id,checked:et.includes(e.id),onCheckedChange:s=>sO(e.id,s)}),(0,t.jsxs)(x.J,{htmlFor:e.id,className:"text-sm flex-1",children:[e.name,e.unit&&(0,t.jsxs)("span",{className:"text-gray-500 ml-1",children:["(",e.unit,")"]})]})]},e.id)))})]})]})})]}),(0,t.jsxs)(d.Zp,{className:"border-orange-200",children:[(0,t.jsx)(d.aR,{className:"bg-orange-50",children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2 text-orange-800",children:[(0,t.jsx)(F.A,{className:"h-5 w-5"}),"분석 실행"]})}),(0,t.jsx)(d.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border border-purple-200",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{"connected"===eM&&sp(!sg)},disabled:"connected"!==eM,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 ".concat(sg?"bg-purple-600":"bg-gray-200"),children:(0,t.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(sg?"translate-x-6":"translate-x-1")})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(x.J,{className:"text-sm font-medium",children:["\uD83E\uDD16 연합학습 하이브리드 AI",(0,t.jsxs)(h.E,{variant:"secondary",className:"ml-2 text-xs",children:[sx,"% 정확도"]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"connected"!==eM?"백엔드 연결 필요":sg?"기존 AI + 개인화 학습 결합 (".concat((null==so?void 0:so.training_data_count)||0,"개 데이터로 학습)"):"기존 AI만 사용"})]})]}),so&&(0,t.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,t.jsxs)(h.E,{variant:"outline",className:"text-xs",children:[so.training_data_count,"/10 학습"]}),(0,t.jsxs)(h.E,{variant:so.personalization_ready?"default":"secondary",className:"text-xs",children:[sx,"% 정확도"]})]})]}),(0,t.jsx)(c.$,{onClick:sg?sR:sL,disabled:er||0===eu.length||!ee||0===et.length,className:"w-full ".concat(sg?"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700"),children:er?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),sg?"하이브리드 분석 중...":"분석 중..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.A,{className:"h-4 w-4 mr-2"}),sg?"\uD83E\uDD16 하이브리드 AI 분석":"AI 분석 시작"]})})]}),em&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(p.w,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-green-800 mb-2",children:"분석 결과"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"전체 상태:"}),(0,t.jsx)(h.E,{variant:"양호"===em.condition?"default":"destructive",children:em.condition})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"신뢰도:"}),(0,t.jsx)("span",{className:"font-medium",children:"95%"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:"주요 권장사항"}),(0,t.jsx)("ul",{className:"space-y-1",children:em.recommendations.slice(0,3).map((e,s)=>(0,t.jsxs)("li",{className:"text-sm text-gray-600 flex items-start gap-1",children:[(0,t.jsx)("span",{className:"text-green-500 font-bold",children:"•"}),e]},s))})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(c.$,{onClick:()=>{if(!em||!en)return;let e=[{id:Date.now().toString(),plantType:en,date:new Date().toISOString(),result:em,userId:j},...eg||[]];ep(e);try{localStorage.setItem(B.SAVED_ANALYSES,JSON.stringify(e)),alert("분석 결과가 저장되었습니다!")}catch(e){console.error("저장 오류:",e),alert("저장 중 오류가 발생했습니다.")}},variant:"outline",className:"flex-1",children:[(0,t.jsx)(O.A,{className:"h-4 w-4 mr-2"}),"분석 결과 저장"]}),sg&&(0,t.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>(0,t.jsx)(c.$,{size:"sm",variant:"outline",onClick:()=>sT(e),className:"w-8 h-8 p-0",title:"".concat(e,"점 평가"),children:"⭐"},e))})]})]}),sg&&so&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border border-purple-200",children:[(0,t.jsxs)("h4",{className:"font-semibold text-purple-800 mb-3 flex items-center gap-2",children:["\uD83C\uDFE1 농가 학습 현황",(0,t.jsx)(h.E,{variant:"outline",className:"text-xs",children:"smart_greenhouse"===so.cluster_type?"스마트온실":"traditional_greenhouse"===so.cluster_type?"전통온실":"노지재배"}),(0,t.jsxs)(h.E,{variant:so.personalization_ready?"default":"secondary",className:"text-xs",children:[sx,"% 정확도"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xl font-bold text-purple-600",children:so.training_data_count}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"학습 데이터"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-xl font-bold text-green-600",children:[sx,"%"]}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"현재 정확도"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xl font-bold text-blue-600",children:so.next_retrain_at}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"다음 재훈련"})]})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{children:"개인화 진행률"}),(0,t.jsxs)("span",{children:[Math.min(so.training_data_count/10*100,100).toFixed(0),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(so.training_data_count/10*100,100),"%")}})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(so.personalization_ready?"bg-green-500":"bg-yellow-500")}),(0,t.jsx)("span",{className:"text-xs text-gray-600",children:so.personalization_ready?"개인화 모델 활성 (".concat(sx,"% 정확도)"):"학습 진행 중 (".concat(Math.round(so.training_data_count/10*100),"% 완료)")})]}),(0,t.jsx)(c.$,{size:"sm",variant:"outline",onClick:sD,className:"text-xs h-6",children:"농가 재분류"})]})]})]})})]})]}),(0,t.jsxs)(d.Zp,{className:"border-blue-200",children:[(0,t.jsx)(d.aR,{className:"bg-blue-50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2 text-blue-800",children:[(0,t.jsx)(C.A,{className:"h-5 w-5"}),"스마트 관찰 카메라 시스템",(0,t.jsxs)(h.E,{variant:"secondary",className:"ml-2",children:[eN.length,"개 카메라"]})]}),(0,t.jsxs)(c.$,{onClick:()=>{if(!ef.trim())return;let e=[...eN||[],{id:Date.now().toString(),name:ef,photos:[],userId:j,interval:60,isActive:!1}];ev(e),ey("");try{localStorage.setItem(B.CAMERAS,JSON.stringify(e))}catch(e){console.error("카메라 저장 오류:",e)}},size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(L.A,{className:"h-4 w-4 mr-2"}),"카메라 추가"]})]})}),(0,t.jsx)(d.Wu,{className:"p-6",children:0===eN.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(C.A,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{className:"text-sm",children:"아직 설정된 관찰 카메라가 없습니다."}),(0,t.jsx)("p",{className:"text-xs",children:"카메라를 추가하여 자동 인터벌 촬영을 시작하세요."})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:eN.map(e=>(0,t.jsxs)(d.Zp,{className:"border-gray-200",children:[(0,t.jsx)(d.aR,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(C.A,{className:"h-4 w-4 text-blue-600"}),(0,t.jsx)("span",{className:"font-medium",children:e.name})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.E,{variant:e.isActive?"default":"secondary",className:"text-xs",children:e.isActive?"촬영중":"대기중"}),(0,t.jsx)(c.$,{size:"sm",variant:"outline",onClick:()=>sz(e.id),className:"h-6 w-6 p-0",children:(0,t.jsx)(E.A,{className:"h-3 w-3"})})]})]})}),(0,t.jsx)(d.Wu,{className:"pt-0",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-gray-500",children:"사진"}),(0,t.jsxs)("div",{className:"font-bold text-blue-600",children:[e.photos.length,"개"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-gray-500",children:"간격"}),(0,t.jsxs)("div",{className:"font-bold text-green-600",children:[e.interval||60,"분"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-gray-500",children:"마지막"}),(0,t.jsx)("div",{className:"font-bold text-orange-600",children:e.photos.length>0?$(e.photos[e.photos.length-1].date,"HH:mm"):"없음"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.p,{type:"number",min:"1",max:"1440",value:e.interval||60,onChange:s=>sU(e.id,parseInt(s.target.value)),className:"w-16 h-7 text-xs"}),(0,t.jsx)("span",{className:"text-xs text-gray-600",children:"분마다 자동촬영"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.$,{size:"sm",variant:e.isActive?"destructive":"default",onClick:()=>sH(e.id),className:"flex-1 h-7 text-xs",children:e.isActive?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z.A,{className:"h-3 w-3 mr-1"}),"중지"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.A,{className:"h-3 w-3 mr-1"}),"시작"]})}),(0,t.jsxs)(c.$,{size:"sm",variant:"outline",onClick:()=>{let s={name:"manual_".concat(Date.now(),".jpg"),date:new Date,environmentData:eC?eA:sW(eR,eI)};ev(a=>a.map(a=>a.id===e.id?{...a,photos:[...a.photos,s]}:a))},className:"h-7 text-xs",children:[(0,t.jsx)(C.A,{className:"h-3 w-3 mr-1"}),"수동촬영"]}),(0,t.jsxs)(c.$,{size:"sm",variant:"outline",onClick:()=>ss(e.id),className:"h-7 text-xs",children:[(0,t.jsx)(A.A,{className:"h-3 w-3 mr-1"}),"갤러리"]})]})]})})]},e.id))}),se&&(0,t.jsxs)(d.Zp,{className:"border-blue-200",children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(A.A,{className:"h-5 w-5"}),null===(s=eN.find(e=>e.id===se))||void 0===s?void 0:s.name," 갤러리"]}),(0,t.jsx)(c.$,{size:"sm",variant:"outline",onClick:()=>ss(null),children:(0,t.jsx)(_.A,{className:"h-4 w-4"})})]})}),(0,t.jsx)(d.Wu,{children:(()=>{let e=eN.find(e=>e.id===se);return e&&0!==e.photos.length?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(c.$,{size:"sm",variant:"outline",onClick:()=>{e9.length===e.photos.length?e7([]):e7(e.photos.map((s,a)=>"".concat(e.id,"_").concat(a)))},children:e9.length===e.photos.length?"전체 해제":"전체 선택"}),e9.length>0&&(0,t.jsxs)(c.$,{size:"sm",variant:"default",onClick:()=>{e.photos.filter((s,a)=>e9.includes("".concat(e.id,"_").concat(a))).forEach((s,a)=>{let t={id:"camera_".concat(e.id,"_").concat(Date.now(),"_").concat(a),file:new File([],s.name,{type:"image/jpeg"}),url:"/placeholder-".concat(Math.floor(3*Math.random())+1,".jpg"),timestamp:s.date,userId:(null==u?void 0:u.id)||"anonymous"};G(e=>[...e,t])}),e7([]),ss(null)},className:"bg-green-600 hover:bg-green-700",children:[(0,t.jsx)(b.A,{className:"h-3 w-3 mr-1"}),"분석에 추가 (",e9.length,"개)"]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["총 ",e.photos.length,"개 사진"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-h-96 overflow-y-auto",children:e.photos.map((s,a)=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)("div",{className:"border-2 rounded-lg overflow-hidden cursor-pointer transition-all ".concat(e9.includes("".concat(e.id,"_").concat(a))?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-400"),onClick:()=>{let s="".concat(e.id,"_").concat(a);e7(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s])},children:[(0,t.jsx)("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:(0,t.jsx)(C.A,{className:"h-8 w-8 text-gray-400"})}),e9.includes("".concat(e.id,"_").concat(a))&&(0,t.jsx)("div",{className:"absolute inset-0 bg-blue-500 bg-opacity-20 flex items-center justify-center",children:(0,t.jsx)(S.A,{className:"h-6 w-6 text-blue-700"})})]}),(0,t.jsxs)("div",{className:"mt-2 text-xs",children:[(0,t.jsx)("div",{className:"font-medium",children:$(s.date,"MM/dd HH:mm")}),s.environmentData&&(0,t.jsxs)("div",{className:"text-gray-500 mt-1 space-y-0.5",children:[(0,t.jsxs)("div",{children:["\uD83C\uDF21️ ",s.environmentData.innerTemperature.toFixed(1),"\xb0C"]}),(0,t.jsxs)("div",{children:["\uD83D\uDCA7 ",s.environmentData.innerHumidity.toFixed(0),"%"]}),(0,t.jsxs)("div",{children:["⚡ pH",s.environmentData.ph.toFixed(1)]})]})]})]},a))})]}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(A.A,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{className:"text-sm",children:"아직 촬영된 사진이 없습니다."}),(0,t.jsx)("p",{className:"text-xs",children:"자동 촬영을 시작하거나 수동 촬영을 해보세요."})]})})()})]})]})})]})]}),(0,t.jsxs)(N.av,{value:"data-management",className:"space-y-6 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"저장된 분석 데이터 관리"}),(0,t.jsxs)(h.E,{variant:"secondary",children:[eg.length,"개 분석 결과"]})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(D.A,{className:"h-5 w-5"}),"데이터 필터링 및 검색"]})}),(0,t.jsxs)(d.Wu,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{children:"검색어"}),(0,t.jsx)(m.p,{placeholder:"분석 결과 검색...",value:eK,onChange:e=>eG(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{children:"식물 종류"}),(0,t.jsxs)(o.l6,{value:eq,onValueChange:eQ,children:[(0,t.jsx)(o.bq,{children:(0,t.jsx)(o.yv,{placeholder:"모든 식물"})}),(0,t.jsxs)(o.gC,{children:[(0,t.jsx)(o.eb,{value:"all",children:"모든 식물"}),sf.map(e=>(0,t.jsx)(o.eb,{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{children:"시작 날짜"}),(0,t.jsx)(m.p,{type:"date",value:e0,onChange:e=>e1(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{children:"종료 날짜"}),(0,t.jsx)(m.p,{type:"date",value:e2,onChange:e=>e5(e.target.value)})]})]}),e4.length>0&&(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg mt-4",children:[(0,t.jsxs)("span",{className:"text-sm text-blue-700",children:[e4.length,"개 항목이 선택되었습니다"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[e4.length>=2&&(0,t.jsxs)(c.$,{onClick:()=>{if(e4.length<2){alert("비교 분석을 위해 2개 이상의 분석 결과를 선택해주세요.");return}let e=[...new Set(eg.filter(e=>e4.includes(e.id)).map(e=>e.plantType))];if(e.length>1){alert("비교 분석은 같은 식물 종류의 분석 결과만 가능합니다.");return}sn(e[0]),st(!0)},size:"sm",className:"bg-green-600 hover:bg-green-700",children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"비교분석"]}),(0,t.jsxs)(c.$,{onClick:()=>{let e=sJ().map((e,s)=>{var a,t,l,n,i,r,c,d,o,m;return{번호:s+1,"식물 종류":(null===(a=sf.find(s=>s.id===e.plantType))||void 0===a?void 0:a.name)||e.plantType,"분석 날짜":"".concat($(new Date(e.date))," ").concat($(new Date(e.date),"HH:mm")),상태:e.result.condition,"AI 모델":(null===(t=W[e.result.modelId])||void 0===t?void 0:t.name)||e.result.modelId,권장사항:e.result.recommendations.join("; "),"환경 온도":(null===(n=e.result.environmentData)||void 0===n?void 0:null===(l=n.innerTemperature)||void 0===l?void 0:l.toFixed(1))+"\xb0C","환경 습도":(null===(r=e.result.environmentData)||void 0===r?void 0:null===(i=r.innerHumidity)||void 0===i?void 0:i.toFixed(0))+"%",pH:(null===(d=e.result.environmentData)||void 0===d?void 0:null===(c=d.ph)||void 0===c?void 0:c.toFixed(1))||"N/A",EC:(null===(m=e.result.environmentData)||void 0===m?void 0:null===(o=m.ec)||void 0===o?void 0:o.toFixed(1))+"dS/m"}}),s=Object.keys(e[0]||{}),a=new Blob(["\uFEFF"+[s.join(","),...e.map(e=>s.map(s=>'"'.concat(e[s],'"')).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download="작물분석데이터_".concat(new Date().toISOString().split("T")[0],".csv"),l.click(),URL.revokeObjectURL(t)},size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(M.A,{className:"h-4 w-4 mr-2"}),"내보내기"]}),(0,t.jsxs)(c.$,{onClick:()=>{if(0!==eY.length&&confirm("선택된 ".concat(eY.length,"개의 분석 결과를 삭제하시겠습니까?"))){let e=eg.filter(e=>!eY.includes(e.id));ep(e),eX([]);try{localStorage.setItem(B.SAVED_ANALYSES,JSON.stringify(e)),alert("분석 결과가 삭제되었습니다.")}catch(e){console.error("삭제 오류:",e)}}},variant:"destructive",size:"sm",children:[(0,t.jsx)(E.A,{className:"h-4 w-4 mr-2"}),"삭제"]})]})]})]})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{children:"분석 결과 목록"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>{e6(sJ().map(e=>e.id))},children:"전체 선택"}),(0,t.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>e6([]),children:"선택 해제"})]})]}),(0,t.jsx)(d.Wu,{children:0===sJ().length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(D.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,t.jsx)("p",{children:"저장된 분석 결과가 없습니다."}),(0,t.jsx)("p",{className:"text-sm",children:"분석을 실행하고 저장해보세요."})]}):(0,t.jsx)("div",{className:"space-y-4",children:sJ().map(e=>{var s;return(0,t.jsx)(d.Zp,{className:"border-l-4 border-l-green-500",children:(0,t.jsx)(d.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(z.S,{checked:e4.includes(e.id),onCheckedChange:()=>{e6(s=>s.includes(e.id)?s.filter(s=>s!==e.id):[...s,e.id])}}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-medium",children:[null===(s=sf.find(s=>s.id===e.plantType))||void 0===s?void 0:s.name," 분석"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[$(new Date(e.date))," ",$(new Date(e.date),"HH:mm")]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.E,{variant:"양호"===e.result.condition?"default":"destructive",children:e.result.condition}),(0,t.jsxs)(c.$,{size:"sm",variant:"outline",onClick:()=>eW(e),children:[(0,t.jsx)(J.A,{className:"h-3 w-3 mr-1"}),"상세보기"]})]})]})})},e.id)})})})]})]}),(0,t.jsxs)(N.av,{value:"observation-camera",className:"space-y-6 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"실시간 모니터링 시스템"}),(0,t.jsx)(h.E,{variant:"default",className:"bg-green-600",children:"실시간 관찰 모드"})]}),(0,t.jsxs)(d.Zp,{className:"border-green-200",children:[(0,t.jsx)(d.aR,{className:"bg-green-50",children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2 text-green-800",children:[(0,t.jsx)(C.A,{className:"h-5 w-5"}),"실시간 카메라 영상"]})}),(0,t.jsxs)(d.Wu,{className:"p-6",children:[(0,t.jsx)("div",{className:"aspect-video bg-gray-900 rounded-lg flex items-center justify-center mb-4",children:(0,t.jsxs)("div",{className:"text-center text-white",children:[(0,t.jsx)(C.A,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{className:"text-lg font-medium",children:"실시간 카메라 영상"}),(0,t.jsx)("p",{className:"text-sm opacity-75",children:"카메라 연결 대기 중..."})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-gray-600",children:"카메라 상태"}),(0,t.jsx)(h.E,{variant:"default",className:"bg-green-600",children:"연결됨"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-gray-600",children:"해상도"}),(0,t.jsx)("div",{className:"font-bold",children:"1920x1080"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-gray-600",children:"프레임률"}),(0,t.jsx)("div",{className:"font-bold",children:"30 FPS"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-gray-600",children:"연결 시간"}),(0,t.jsx)("div",{className:"font-bold",children:"00:45:23"})]})]})]})]}),(0,t.jsxs)(d.Zp,{className:"border-blue-200",children:[(0,t.jsx)(d.aR,{className:"bg-blue-50",children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2 text-blue-800",children:[(0,t.jsx)(b.A,{className:"h-5 w-5"}),"실시간 환경 모니터링"]})}),(0,t.jsxs)(d.Wu,{className:"p-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)(w.A,{className:"h-4 w-4 text-red-500 mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"내부온도"})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-red-600",children:[eA.innerTemperature.toFixed(1),"\xb0C"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)(w.A,{className:"h-4 w-4 text-red-400 mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"외부온도"})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-red-500",children:[eA.outerTemperature.toFixed(1),"\xb0C"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)(w.A,{className:"h-4 w-4 text-orange-500 mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"근권온도"})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-orange-600",children:[eA.rootZoneTemperature.toFixed(1),"\xb0C"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)(R.A,{className:"h-4 w-4 text-blue-500 mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"내부습도"})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[eA.innerHumidity.toFixed(0),"%"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)(T.A,{className:"h-4 w-4 text-yellow-500 mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"일사량"})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-yellow-600",children:[eA.solarRadiation.toFixed(0),"W/m\xb2"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"PH"})]}),(0,t.jsx)("div",{className:"text-lg font-bold text-green-600",children:eA.ph.toFixed(1)})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)(I.A,{className:"h-4 w-4 text-purple-500 mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"EC"})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:[eA.ec.toFixed(1),"dS/m"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-teal-500 rounded-full mr-1"}),(0,t.jsx)(x.J,{className:"text-sm text-gray-600",children:"DO"})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-teal-600",children:[eA.dissolvedOxygen.toFixed(1),"mg/L"]})]})]}),(0,t.jsx)("div",{className:"mt-4 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["마지막 업데이트: ",$(eA.timestamp)," ",$(eA.timestamp,"HH:mm")]})})]})]}),(0,t.jsxs)(d.Zp,{className:"border-orange-200",children:[(0,t.jsx)(d.aR,{className:"bg-orange-50",children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2 text-orange-800",children:[(0,t.jsx)(U.A,{className:"h-5 w-5"}),"실시간 상태 알림"]})}),(0,t.jsx)(d.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-green-800",children:"환경 상태 양호"}),(0,t.jsx)("p",{className:"text-sm text-green-600",children:"모든 환경 지표가 적정 범위 내에 있습니다."})]}),(0,t.jsx)(h.E,{variant:"default",className:"bg-green-600 ml-auto",children:"정상"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-blue-800",children:"성장 단계 모니터링"}),(0,t.jsx)("p",{className:"text-sm text-blue-600",children:"현재 영양생장기 단계로 추정됩니다."})]}),(0,t.jsx)(h.E,{variant:"secondary",className:"ml-auto",children:"관찰중"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-yellow-800",children:"일사량 주의"}),(0,t.jsx)("p",{className:"text-sm text-yellow-600",children:"오후 시간대 일사량이 높습니다. 차광막 고려하세요."})]}),(0,t.jsx)(h.E,{variant:"outline",className:"text-yellow-700 border-yellow-300 ml-auto",children:"주의"})]})]})})]})]}),(0,t.jsxs)(N.av,{value:"settings",className:"space-y-6 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"시스템 설정 및 정보"}),(0,t.jsx)(h.E,{variant:"default",children:"V12.0.1 Professional"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(b.A,{className:"h-5 w-5"}),"AI 엔진 상태"]})}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"상태:"}),(0,t.jsx)(h.E,{variant:"online"===eL?"default":"destructive",children:eL})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"로드된 모델:"}),(0,t.jsxs)("span",{className:"font-medium",children:[Object.keys(W).length,"개"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"백엔드 연결:"}),(0,t.jsx)(h.E,{variant:"connected"===eM?"default":"secondary",children:eM})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"평균 응답시간:"}),(0,t.jsx)("span",{className:"font-medium",children:"2.3초"})]}),"online"!==eL&&(0,t.jsxs)(c.$,{onClick:sM,className:"w-full mt-4",children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"AI 엔진 복구"]})]})})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"h-5 w-5"}),"시스템 통계"]})}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"총 분석 수:"}),(0,t.jsxs)("span",{className:"font-medium",children:[eg.length,"개"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"업로드 이미지:"}),(0,t.jsxs)("span",{className:"font-medium",children:[K.length,"개"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"관찰 카메라:"}),(0,t.jsxs)("span",{className:"font-medium",children:[eN.length,"개"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"평균 정확도:"}),(0,t.jsx)("span",{className:"font-medium",children:"94.2%"})]})]})})]})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(H.A,{className:"h-5 w-5"}),"환경 데이터 히스토리"]})}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"\uD83D\uDCC8 온도 추이"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("p",{children:["평균 내부온도: ",(0,t.jsx)("span",{className:"font-medium",children:"25.3\xb0C"})]}),(0,t.jsxs)("p",{children:["평균 외부온도: ",(0,t.jsx)("span",{className:"font-medium",children:"22.1\xb0C"})]}),(0,t.jsxs)("p",{children:["온도 변화폭: ",(0,t.jsx)("span",{className:"font-medium",children:"\xb12.1\xb0C"})]})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium text-green-800 mb-2",children:"\uD83D\uDCA7 습도 & 수질"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("p",{children:["평균 습도: ",(0,t.jsx)("span",{className:"font-medium",children:"67.8%"})]}),(0,t.jsxs)("p",{children:["평균 PH: ",(0,t.jsx)("span",{className:"font-medium",children:"6.4"})]}),(0,t.jsxs)("p",{children:["평균 EC: ",(0,t.jsx)("span",{className:"font-medium",children:"1.7 dS/m"})]})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium text-yellow-800 mb-2",children:"☀️ 일사량 분석"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("p",{children:["최대 일사량: ",(0,t.jsx)("span",{className:"font-medium",children:"520 W/m\xb2"})]}),(0,t.jsxs)("p",{children:["평균 일사량: ",(0,t.jsx)("span",{className:"font-medium",children:"385 W/m\xb2"})]}),(0,t.jsxs)("p",{children:["일조 시간: ",(0,t.jsx)("span",{className:"font-medium",children:"12.5시간"})]})]})]})]})})]})]})]})})]}),ez&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(d.Zp,{className:"w-full max-w-4xl max-h-[90vh] flex flex-col",children:[(0,t.jsxs)(d.aR,{className:"flex flex-row items-center justify-between flex-shrink-0",children:[(0,t.jsxs)(d.ZB,{className:"text-xl",children:["분석 결과 상세보기 - ",null===(a=sf.find(e=>e.id===ez.plantType))||void 0===a?void 0:a.name]}),(0,t.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>eW(null),children:(0,t.jsx)(_.A,{className:"h-4 w-4"})})]}),(0,t.jsx)(d.Wu,{className:"flex-1 overflow-y-auto p-6",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{className:"font-medium",children:"분석 날짜"}),(0,t.jsx)("p",{children:$(new Date(ez.date))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{className:"font-medium",children:"상태"}),(0,t.jsx)(h.E,{variant:"양호"===ez.result.condition?"default":"destructive",className:"ml-2",children:ez.result.condition})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{className:"font-medium",children:"사용된 AI 모델"}),(0,t.jsx)("p",{children:null===(i=W[ez.result.modelId])||void 0===i?void 0:i.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{className:"font-medium",children:"분석 항목 결과"}),(0,t.jsx)("div",{className:"mt-2 space-y-2",children:(ez.result.selectedAnalysisItems||[]).map(e=>{let s=W[ez.result.modelId],a=null==s?void 0:s.analysisItems.find(s=>s.id===e),l=ez.result.analysisData[e];return a&&void 0!==l?(0,t.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h5",{className:"font-medium text-gray-700",children:a.name}),(0,t.jsx)(h.E,{variant:"outline",children:a.type})]}),(0,t.jsx)("div",{className:"text-lg font-bold text-gray-900",children:"number"===a.type?(0,t.jsxs)(t.Fragment,{children:["number"==typeof l?l.toFixed(1):l,a.unit&&(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:a.unit})]}):"object"===a.type?(0,t.jsx)("div",{className:"text-sm space-y-1",children:Object.entries(l).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{className:"capitalize",children:[s,":"]}),(0,t.jsx)("span",{children:String(a)})]},s)})}):(0,t.jsx)("span",{children:String(l)})})]},e):null})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{className:"font-medium",children:"AI 전문가 권장사항"}),(0,t.jsx)("ul",{className:"mt-2 space-y-2",children:(ez.result.recommendations||[]).map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 p-2 bg-green-50 rounded",children:[(0,t.jsx)(b.A,{className:"h-4 w-4 mt-0.5 text-green-500 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-sm",children:e})]},s))})]}),ez.result.environmentData&&(0,t.jsxs)("div",{children:[(0,t.jsx)(x.J,{className:"font-medium",children:"분석 시점 환경 데이터"}),(0,t.jsxs)("div",{className:"mt-2 grid grid-cols-4 gap-4 p-4 bg-blue-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"내부온도"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-red-600",children:[ez.result.environmentData.innerTemperature.toFixed(1),"\xb0C"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"습도"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[ez.result.environmentData.innerHumidity.toFixed(0),"%"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"PH"}),(0,t.jsx)("div",{className:"text-lg font-bold text-green-600",children:ez.result.environmentData.ph.toFixed(1)})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"EC"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:[ez.result.environmentData.ec.toFixed(1),"dS/m"]})]})]})]})]})})]})}),sa&&sl&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(d.Zp,{className:"w-full max-w-6xl max-h-[90vh] flex flex-col",children:[(0,t.jsxs)(d.aR,{className:"flex flex-row items-center justify-between flex-shrink-0",children:[(0,t.jsxs)(d.ZB,{className:"text-xl flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"h-6 w-6"}),null===(r=sf.find(e=>e.id===sl))||void 0===r?void 0:r.name," 비교 분석 그래프",(0,t.jsx)(h.E,{variant:"secondary",className:"ml-2",children:e4.length>0?"".concat(e4.length,"개 항목 비교"):"전체 데이터"})]}),(0,t.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>st(!1),children:(0,t.jsx)(_.A,{className:"h-4 w-4"})})]}),(0,t.jsx)(d.Wu,{className:"flex-1 overflow-y-auto p-6",children:(()=>{let e=sB(sl);return e?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(d.Zp,{className:"border-blue-200",children:(0,t.jsxs)(d.Wu,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.totalAnalyses}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"총 분석 횟수"})]})}),(0,t.jsx)(d.Zp,{className:"border-green-200",children:(0,t.jsxs)(d.Wu,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.dateRange.start}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"시작 날짜"})]})}),(0,t.jsx)(d.Zp,{className:"border-orange-200",children:(0,t.jsxs)(d.Wu,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:e.dateRange.end}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"최근 분석"})]})})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(b.A,{className:"h-5 w-5"}),"건강 상태 추이"]})}),(0,t.jsx)(d.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:e.healthTrend.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-20 text-sm text-gray-600",children:e.date}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:e.condition}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:[e.score.toFixed(0),"점"]})]}),(0,t.jsx)(g,{value:e.score,className:"h-2"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs text-gray-600",children:[(0,t.jsxs)("div",{children:["온도: ",e.temperature.toFixed(1),"\xb0C"]}),(0,t.jsxs)("div",{children:["습도: ",e.humidity.toFixed(0),"%"]}),(0,t.jsxs)("div",{children:["pH: ",e.ph.toFixed(1)]})]})]},s))})})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(w.A,{className:"h-5 w-5"}),"환경 데이터 분석"]})}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium text-red-800 mb-2",children:"\uD83C\uDF21️ 온도 분석"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("p",{children:["평균 온도: ",(0,t.jsxs)("span",{className:"font-medium",children:[(e.healthTrend.reduce((e,s)=>e+s.temperature,0)/e.healthTrend.length).toFixed(1),"\xb0C"]})]}),(0,t.jsxs)("p",{children:["최고 온도: ",(0,t.jsxs)("span",{className:"font-medium",children:[Math.max(...e.healthTrend.map(e=>e.temperature)).toFixed(1),"\xb0C"]})]}),(0,t.jsxs)("p",{children:["최저 온도: ",(0,t.jsxs)("span",{className:"font-medium",children:[Math.min(...e.healthTrend.map(e=>e.temperature)).toFixed(1),"\xb0C"]})]})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"\uD83D\uDCA7 습도 분석"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("p",{children:["평균 습도: ",(0,t.jsxs)("span",{className:"font-medium",children:[(e.healthTrend.reduce((e,s)=>e+s.humidity,0)/e.healthTrend.length).toFixed(0),"%"]})]}),(0,t.jsxs)("p",{children:["최고 습도: ",(0,t.jsxs)("span",{className:"font-medium",children:[Math.max(...e.healthTrend.map(e=>e.humidity)).toFixed(0),"%"]})]}),(0,t.jsxs)("p",{children:["최저 습도: ",(0,t.jsxs)("span",{className:"font-medium",children:[Math.min(...e.healthTrend.map(e=>e.humidity)).toFixed(0),"%"]})]})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium text-green-800 mb-2",children:"⚗️ pH 분석"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("p",{children:["평균 pH: ",(0,t.jsx)("span",{className:"font-medium",children:(e.healthTrend.reduce((e,s)=>e+s.ph,0)/e.healthTrend.length).toFixed(1)})]}),(0,t.jsxs)("p",{children:["최고 pH: ",(0,t.jsx)("span",{className:"font-medium",children:Math.max(...e.healthTrend.map(e=>e.ph)).toFixed(1)})]}),(0,t.jsxs)("p",{children:["최저 pH: ",(0,t.jsx)("span",{className:"font-medium",children:Math.min(...e.healthTrend.map(e=>e.ph)).toFixed(1)})]})]})]})]})})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(S.A,{className:"h-5 w-5"}),"주요 관리 권장사항"]})}),(0,t.jsx)(d.Wu,{children:(0,t.jsx)("div",{className:"space-y-2",children:e.recommendations.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start gap-2 p-2 bg-green-50 rounded",children:[(0,t.jsx)(S.A,{className:"h-4 w-4 mt-0.5 text-green-500 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-sm",children:e})]},s))})})]})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(y.A,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),(0,t.jsx)("h4",{className:"text-lg font-medium text-gray-600 mb-2",children:"분석 데이터가 부족합니다"}),(0,t.jsx)("p",{className:"text-gray-500",children:"이 식물 종류에 대한 분석 결과가 없습니다."})]})})()})]})}),(0,t.jsxs)("div",{className:"hidden",children:[(0,t.jsx)(Y,{data:eC?eA:sW(eR,eI),showTimestamp:!0,compact:!1}),(0,t.jsx)(es,{onAnalysisComplete:e=>{console.log("분석 완료:",e)},maxImages:10,allowedFormats:["image/jpeg","image/png","image/webp"],maxFileSize:0xa00000}),(0,t.jsx)(ed,{onStatusChange:e=>{console.log("연합학습 상태 변경:",e)},autoJoin:!1,shareData:!0}),(0,t.jsx)(eo,{}),(0,t.jsx)(ex,{analysisResults:eg.map(e=>({imageId:e.id,health:e.result.condition.includes("좋음")?"좋음":"주의",growth:"정상",recommend:e.result.recommendations.join(", "),analyzedAt:new Date(e.date)})),environmentData:eE,uploadedImages:K,onDataImported:e=>{console.log("데이터 가져오기:",e)}})]})]})})}function eu(){let{isAuthenticated:e,loading:s}=(0,n.A)(),a=(0,i.useRouter)();return((0,l.useEffect)(()=>{s||e||a.replace("/login?redirect=/analysis")},[e,s,a]),s)?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-green-600",children:"로그인 상태 확인 중..."})]})}):e?(0,t.jsxs)("div",{children:[(0,t.jsx)(r.Navbar,{}),(0,t.jsx)(eh,{})]}):null}},88482:(e,s,a)=>{"use strict";a.d(s,{Wu:()=>d,ZB:()=>c,Zp:()=>i,aR:()=>r});var t=a(95155),l=a(12115),n=a(53999);let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});i.displayName="Card";let r=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...l})});r.displayName="CardHeader";let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});c.displayName="CardTitle",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...l})}).displayName="CardDescription";let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",a),...l})});d.displayName="CardContent",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter"},89852:(e,s,a)=>{"use strict";a.d(s,{p:()=>i});var t=a(95155),l=a(12115),n=a(53999);let i=l.forwardRef((e,s)=>{let{className:a,type:l,...i}=e;return(0,t.jsx)("input",{type:l,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...i})});i.displayName="Input"},95139:(e,s,a)=>{"use strict";a.d(s,{S:()=>c});var t=a(95155),l=a(12115),n=a(61620),i=a(5196),r=a(53999);let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.bL,{ref:s,className:(0,r.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...l,children:(0,t.jsx)(n.C1,{className:(0,r.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})})});c.displayName=n.bL.displayName},95784:(e,s,a)=>{"use strict";a.d(s,{bq:()=>x,eb:()=>g,gC:()=>j,l6:()=>o,yv:()=>m});var t=a(95155),l=a(12115),n=a(77320),i=a(66474),r=a(47863),c=a(5196),d=a(53999);let o=n.bL;n.YJ;let m=n.WT,x=l.forwardRef((e,s)=>{let{className:a,children:l,...r}=e;return(0,t.jsxs)(n.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...r,children:[l,(0,t.jsx)(n.In,{asChild:!0,children:(0,t.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=n.l9.displayName;let h=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.PP,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(r.A,{className:"h-4 w-4"})})});h.displayName=n.PP.displayName;let u=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.wn,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});u.displayName=n.wn.displayName;let j=l.forwardRef((e,s)=>{let{className:a,children:l,position:i="popper",...r}=e;return(0,t.jsx)(n.ZL,{children:(0,t.jsxs)(n.UC,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...r,children:[(0,t.jsx)(h,{}),(0,t.jsx)(n.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,t.jsx)(u,{})]})})});j.displayName=n.UC.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.JU,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=n.JU.displayName;let g=l.forwardRef((e,s)=>{let{className:a,children:l,...i}=e;return(0,t.jsxs)(n.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(n.VF,{children:(0,t.jsx)(c.A,{className:"h-4 w-4"})})}),(0,t.jsx)(n.p4,{children:l})]})});g.displayName=n.q7.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=n.wv.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[96,751,358],()=>s(38499)),_N_E=e.O()}]);