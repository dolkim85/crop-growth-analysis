(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{9862:(e,t,r)=>{"use strict";r.d(t,{y:()=>c});var o=r(49509);let a=()=>{let e=window.location.origin;return{google:{clientId:o.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID||"your-google-client-id",redirectUri:o.env.NEXT_PUBLIC_GOOGLE_REDIRECT_URI||"".concat(e,"/auth/google/callback")},kakao:{clientId:o.env.NEXT_PUBLIC_KAKAO_CLIENT_ID||"your-kakao-client-id",redirectUri:o.env.NEXT_PUBLIC_KAKAO_REDIRECT_URI||"".concat(e,"/auth/kakao/callback")},naver:{clientId:o.env.NEXT_PUBLIC_NAVER_CLIENT_ID||"your-naver-client-id",redirectUri:o.env.NEXT_PUBLIC_NAVER_REDIRECT_URI||"".concat(e,"/auth/naver/callback")}}},i={loginWithGoogle:()=>{let e=a(),t="https://accounts.google.com/oauth/authorize?"+"client_id=".concat(e.google.clientId,"&")+"redirect_uri=".concat(encodeURIComponent(e.google.redirectUri),"&")+"response_type=code&scope=openid email profile&access_type=offline";window.location.href=t},loginWithKakao:()=>{let e=a();if(window.Kakao)window.Kakao.isInitialized()||window.Kakao.init(e.kakao.clientId),window.Kakao.Auth.authorize({redirectUri:e.kakao.redirectUri,scope:"profile_nickname,profile_image,account_email"});else{let t="https://kauth.kakao.com/oauth/authorize?"+"client_id=".concat(e.kakao.clientId,"&")+"redirect_uri=".concat(encodeURIComponent(e.kakao.redirectUri),"&")+"response_type=code&scope=profile_nickname,profile_image,account_email";window.location.href=t}},loginWithNaver:()=>{let e=a(),t=Math.random().toString(36).substring(2,15);sessionStorage.setItem("naver_state",t);let r="https://nid.naver.com/oauth2.0/authorize?"+"client_id=".concat(e.naver.clientId,"&")+"redirect_uri=".concat(encodeURIComponent(e.naver.redirectUri),"&")+"response_type=code&"+"state=".concat(t,"&")+"scope=name,email,profile_image";window.location.href=r}},n=[{id:"admin_spinmoll",email:"spinmoll@admin.com",name:"spinmoll (관리자)",provider:"email",avatar:"/placeholder.svg?height=40&width=40&text=Admin",role:"admin"}],s="crop_analysis_auth",c={login:async(e,t)=>{if(await new Promise(e=>setTimeout(e,1e3)),"spinmoll"===e&&"1234"===t){let e=n[0];return localStorage.setItem(s,JSON.stringify(e)),{success:!0,user:e}}let r=n.find(t=>t.email===e);return r&&t?(localStorage.setItem(s,JSON.stringify(r)),{success:!0,user:r}):{success:!1,error:"이메일 또는 비밀번호가 올바르지 않습니다."}},signup:async(e,t,r)=>{if(await new Promise(e=>setTimeout(e,1e3)),n.some(t=>t.email===e))return{success:!1,error:"이미 존재하는 이메일입니다."};let o={id:Math.random().toString(36).substr(2,9),email:e,name:r,provider:"email",role:"user"};return n.push(o),localStorage.setItem(s,JSON.stringify(o)),{success:!0,user:o}},socialLogin:async e=>{try{switch(e){case"google":i.loginWithGoogle();break;case"kakao":i.loginWithKakao();break;case"naver":i.loginWithNaver()}return{success:!0}}catch(t){return console.error("".concat(e," 로그인 오류:"),t),{success:!1,error:"".concat(e," 로그인에 실패했습니다.")}}},handleSocialCallback:async(e,t,r)=>{try{await new Promise(e=>setTimeout(e,1e3));let t={id:Math.random().toString(36).substr(2,9),email:"user@".concat(e,".com"),name:"".concat(e," 사용자"),provider:e,avatar:"/placeholder.svg?height=40&width=40&text=".concat(e.charAt(0).toUpperCase())};return n.push(t),localStorage.setItem(s,JSON.stringify(t)),{success:!0,user:t}}catch(e){return console.error("소셜 로그인 콜백 처리 오류:",e),{success:!1,error:"소셜 로그인 처리 중 오류가 발생했습니다."}}},logout:()=>{localStorage.removeItem(s),sessionStorage.removeItem(s),sessionStorage.removeItem("naver_state"),window.location.href="/"},getCurrentUser:()=>{try{let e=localStorage.getItem(s);return e?JSON.parse(e):null}catch(e){return null}}}},11988:(e,t,r)=>{Promise.resolve().then(r.bind(r,94861)),Promise.resolve().then(r.t.bind(r,29840,23)),Promise.resolve().then(r.t.bind(r,19324,23))},19324:()=>{},94861:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>s});var o=r(95155),a=r(12115),i=r(9862);let n=(0,a.createContext)(void 0);function s(e){let{children:t}=e,[r,s]=(0,a.useState)(null),[c,l]=(0,a.useState)(!0);(0,a.useEffect)(()=>{s(i.y.getCurrentUser()),l(!1)},[]);let u=async(e,t)=>{let r=await i.y.login(e,t);return r.success&&r.user&&s(r.user),{success:r.success,error:r.error}},d=async(e,t,r)=>{let o=await i.y.signup(e,t,r);return o.success&&o.user&&s(o.user),{success:o.success,error:o.error}},m=async e=>{let t=await i.y.socialLogin(e);return t.success&&t.user&&s(t.user),{success:t.success,error:t.error}};return(0,o.jsx)(n.Provider,{value:{user:r,isAuthenticated:!!r,login:u,signup:d,socialLogin:m,logout:()=>{i.y.logout(),s(null),localStorage.removeItem("crop_analysis_auth")},loading:c},children:t})}function c(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[385,96,358],()=>t(11988)),_N_E=e.O()}]);