(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[519],{9862:(e,o,a)=>{"use strict";a.d(o,{y:()=>s});var t=a(49509);let r=()=>{let e=window.location.origin;return{google:{clientId:t.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID||"your-google-client-id",redirectUri:t.env.NEXT_PUBLIC_GOOGLE_REDIRECT_URI||"".concat(e,"/auth/google/callback")},kakao:{clientId:t.env.NEXT_PUBLIC_KAKAO_CLIENT_ID||"your-kakao-client-id",redirectUri:t.env.NEXT_PUBLIC_KAKAO_REDIRECT_URI||"".concat(e,"/auth/kakao/callback")},naver:{clientId:t.env.NEXT_PUBLIC_NAVER_CLIENT_ID||"your-naver-client-id",redirectUri:t.env.NEXT_PUBLIC_NAVER_REDIRECT_URI||"".concat(e,"/auth/naver/callback")}}},i={loginWithGoogle:()=>{let e=r(),o="https://accounts.google.com/oauth/authorize?"+"client_id=".concat(e.google.clientId,"&")+"redirect_uri=".concat(encodeURIComponent(e.google.redirectUri),"&")+"response_type=code&scope=openid email profile&access_type=offline";window.location.href=o},loginWithKakao:()=>{let e=r();if(window.Kakao)window.Kakao.isInitialized()||window.Kakao.init(e.kakao.clientId),window.Kakao.Auth.authorize({redirectUri:e.kakao.redirectUri,scope:"profile_nickname,profile_image,account_email"});else{let o="https://kauth.kakao.com/oauth/authorize?"+"client_id=".concat(e.kakao.clientId,"&")+"redirect_uri=".concat(encodeURIComponent(e.kakao.redirectUri),"&")+"response_type=code&scope=profile_nickname,profile_image,account_email";window.location.href=o}},loginWithNaver:()=>{let e=r(),o=Math.random().toString(36).substring(2,15);sessionStorage.setItem("naver_state",o);let a="https://nid.naver.com/oauth2.0/authorize?"+"client_id=".concat(e.naver.clientId,"&")+"redirect_uri=".concat(encodeURIComponent(e.naver.redirectUri),"&")+"response_type=code&"+"state=".concat(o,"&")+"scope=name,email,profile_image";window.location.href=a}},n=[{id:"admin_spinmoll",email:"spinmoll@admin.com",name:"spinmoll (관리자)",provider:"email",avatar:"/placeholder.svg?height=40&width=40&text=Admin",role:"admin"}],c="crop_analysis_auth",s={login:async(e,o)=>{if(await new Promise(e=>setTimeout(e,1e3)),"spinmoll"===e&&"1234"===o){let e=n[0];return localStorage.setItem(c,JSON.stringify(e)),{success:!0,user:e}}let a=n.find(o=>o.email===e);return a&&o?(localStorage.setItem(c,JSON.stringify(a)),{success:!0,user:a}):{success:!1,error:"이메일 또는 비밀번호가 올바르지 않습니다."}},signup:async(e,o,a)=>{if(await new Promise(e=>setTimeout(e,1e3)),n.some(o=>o.email===e))return{success:!1,error:"이미 존재하는 이메일입니다."};let t={id:Math.random().toString(36).substr(2,9),email:e,name:a,provider:"email",role:"user"};return n.push(t),localStorage.setItem(c,JSON.stringify(t)),{success:!0,user:t}},socialLogin:async e=>{try{switch(e){case"google":i.loginWithGoogle();break;case"kakao":i.loginWithKakao();break;case"naver":i.loginWithNaver()}return{success:!0}}catch(o){return console.error("".concat(e," 로그인 오류:"),o),{success:!1,error:"".concat(e," 로그인에 실패했습니다.")}}},handleSocialCallback:async(e,o,a)=>{try{await new Promise(e=>setTimeout(e,1e3));let o={id:Math.random().toString(36).substr(2,9),email:"user@".concat(e,".com"),name:"".concat(e," 사용자"),provider:e,avatar:"/placeholder.svg?height=40&width=40&text=".concat(e.charAt(0).toUpperCase())};return n.push(o),localStorage.setItem(c,JSON.stringify(o)),{success:!0,user:o}}catch(e){return console.error("소셜 로그인 콜백 처리 오류:",e),{success:!1,error:"소셜 로그인 처리 중 오류가 발생했습니다."}}},logout:()=>{localStorage.removeItem(c),sessionStorage.removeItem(c),sessionStorage.removeItem("naver_state"),window.location.href="/"},getCurrentUser:()=>{try{let e=localStorage.getItem(c);return e?JSON.parse(e):null}catch(e){return null}}}},24249:(e,o,a)=>{Promise.resolve().then(a.bind(a,25072))},25072:(e,o,a)=>{"use strict";a.r(o),a.d(o,{default:()=>c});var t=a(95155),r=a(12115),i=a(35695),n=a(9862);function c(){let e=(0,i.useRouter)(),o=(0,i.useSearchParams)();return(0,r.useEffect)(()=>{(async()=>{let a=o.get("code"),t=o.get("error");if(t){console.error("Kakao 로그인 오류:",t),e.push("/login?error=kakao_login_failed");return}if(a)try{let o=await n.y.handleSocialCallback("kakao",a);o.success&&o.user?(localStorage.setItem("crop_analysis_auth",JSON.stringify(o.user)),e.push("/analysis")):e.push("/login?error=kakao_login_failed")}catch(o){console.error("Kakao 콜백 처리 오류:",o),e.push("/login?error=kakao_login_failed")}})()},[o,e]),(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-yellow-600",children:"Kakao 로그인 처리 중..."})]})})}}},e=>{var o=o=>e(e.s=o);e.O(0,[96,358],()=>o(24249)),_N_E=e.O()}]);