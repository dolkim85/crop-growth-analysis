(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{39788:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>y});var t=a(95155),l=a(12115),r=a(97168),i=a(88482),n=a(88145),d=a(95784),c=a(35169),o=a(84355),x=a(82178),m=a(85690),h=a(9771),u=a(15273),p=a(40133),f=a(57918),j=a(381),N=a(6874),g=a.n(N),v=a(94861),w=a(22751);let b=[{id:"1",name:"온실 A-1",location:"온실 A동 1번 구역",status:"online",streamUrl:"/placeholder.svg?height=480&width=640&text=온실A-1실시간영상",resolution:"1920x1080",fps:30,userId:"spinmoll",lastUpdate:new Date},{id:"2",name:"온실 A-2",location:"온실 A동 2번 구역",status:"online",streamUrl:"/placeholder.svg?height=480&width=640&text=온실A-2실시간영상",resolution:"1920x1080",fps:30,userId:"spinmoll",lastUpdate:new Date},{id:"3",name:"온실 B-1",location:"온실 B동 1번 구역",status:"offline",streamUrl:"/placeholder.svg?height=480&width=640&text=오프라인",resolution:"1920x1080",fps:0,userId:"spinmoll",lastUpdate:new Date(Date.now()-36e5)}];function y(){let{user:e}=(0,v.A)(),[s,a]=(0,l.useState)(""),[N,y]=(0,l.useState)(!0),[A,C]=(0,l.useState)(!1),[R,k]=(0,l.useState)(!1),[Z,U]=(0,l.useState)(new Date),z=b.filter(s=>s.userId===(null==e?void 0:e.id)),W=z.filter(e=>"online"===e.status),E=z.filter(e=>"offline"===e.status);(0,l.useEffect)(()=>{let e=setInterval(()=>{U(new Date)},1e3);return()=>clearInterval(e)},[]),(0,l.useEffect)(()=>{!s&&W.length>0&&a(W[0].id)},[s,W]);let I=z.find(e=>e.id===s),D=e=>{let s=Math.floor((new Date().getTime()-e.getTime())/6e4);if(s<1)return"방금 전";if(s<60)return"".concat(s,"분 전");let a=Math.floor(s/60);if(a<24)return"".concat(a,"시간 전");let t=Math.floor(a/24);return"".concat(t,"일 전")};return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-indigo-50",children:[(0,t.jsx)(w.Navbar,{}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(g(),{href:"/analysis",children:(0,t.jsxs)(r.$,{variant:"outline",size:"sm",children:[(0,t.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"돌아가기"]})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-purple-800 flex items-center gap-2",children:[(0,t.jsx)(o.A,{className:"h-8 w-8"}),"실시간 카메라 모니터링"]}),(0,t.jsxs)("p",{className:"text-purple-600",children:[null==e?void 0:e.name,"님의 등록된 카메라를 실시간으로 확인하세요"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(i.Zp,{children:(0,t.jsxs)(i.Wu,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-700",children:z.length}),(0,t.jsx)("div",{className:"text-sm text-purple-600",children:"총 카메라"})]})}),(0,t.jsx)(i.Zp,{children:(0,t.jsxs)(i.Wu,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-700",children:W.length}),(0,t.jsx)("div",{className:"text-sm text-green-600",children:"온라인"})]})}),(0,t.jsx)(i.Zp,{children:(0,t.jsxs)(i.Wu,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-700",children:E.length}),(0,t.jsx)("div",{className:"text-sm text-red-600",children:"오프라인"})]})}),(0,t.jsx)(i.Zp,{children:(0,t.jsxs)(i.Wu,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:Z.toLocaleTimeString("ko-KR")}),(0,t.jsx)("div",{className:"text-sm text-blue-600",children:"현재 시간"})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(o.A,{className:"h-5 w-5"}),I?I.name:"카메라를 선택하세요"]}),I&&(0,t.jsx)(n.E,{variant:"online"===I.status?"default":"destructive",children:"online"===I.status?"온라인":"오프라인"})]})}),(0,t.jsx)(i.Wu,{className:"space-y-4",children:I?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"relative bg-black rounded-lg overflow-hidden ".concat(R?"fixed inset-0 z-50":"aspect-video"),children:[(0,t.jsx)("img",{src:I.streamUrl||"/placeholder.svg",alt:"".concat(I.name," 실시간 영상"),className:"w-full h-full object-cover"}),(0,t.jsxs)("div",{className:"absolute top-4 left-4 bg-black bg-opacity-70 text-white px-3 py-1 rounded",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:I.name}),(0,t.jsx)("div",{className:"text-xs",children:Z.toLocaleString("ko-KR")})]}),(0,t.jsx)("div",{className:"absolute top-4 right-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded ".concat("online"===I.status?"bg-green-600 text-white":"bg-red-600 text-white"),children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("online"===I.status?"bg-green-300":"bg-red-300"," ").concat("online"===I.status?"animate-pulse":"")}),(0,t.jsx)("span",{className:"text-xs font-medium",children:"online"===I.status?"LIVE":"OFFLINE"})]})}),(0,t.jsx)("div",{className:"absolute bottom-4 left-4 right-4 bg-black bg-opacity-70 rounded-lg p-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>y(!N),className:"text-white hover:bg-white/20",disabled:"offline"===I.status,children:N?(0,t.jsx)(x.A,{className:"h-4 w-4"}):(0,t.jsx)(m.A,{className:"h-4 w-4"})}),(0,t.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>C(!A),className:"text-white hover:bg-white/20",children:A?(0,t.jsx)(h.A,{className:"h-4 w-4"}):(0,t.jsx)(u.A,{className:"h-4 w-4"})}),(0,t.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>{alert("카메라 스트림을 새로고침합니다.")},className:"text-white hover:bg-white/20",children:(0,t.jsx)(p.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-white text-xs",children:[I.resolution," • ",I.fps,"fps"]}),(0,t.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>{k(!R)},className:"text-white hover:bg-white/20",children:(0,t.jsx)(f.A,{className:"h-4 w-4"})})]})]})}),"offline"===I.status&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center text-white",children:[(0,t.jsx)(o.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"카메라 오프라인"}),(0,t.jsxs)("p",{className:"text-sm opacity-75",children:["마지막 연결: ",D(I.lastUpdate)]})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-gray-600",children:"위치:"}),(0,t.jsx)("span",{className:"ml-2",children:I.location})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-gray-600",children:"해상도:"}),(0,t.jsx)("span",{className:"ml-2",children:I.resolution})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-gray-600",children:"프레임률:"}),(0,t.jsxs)("span",{className:"ml-2",children:[I.fps,"fps"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-gray-600",children:"마지막 업데이트:"}),(0,t.jsx)("span",{className:"ml-2",children:D(I.lastUpdate)})]})]})]}):(0,t.jsx)("div",{className:"aspect-video bg-gray-100 rounded-lg flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center text-gray-500",children:[(0,t.jsx)(o.A,{className:"h-12 w-12 mx-auto mb-4"}),(0,t.jsx)("p",{children:"카메라를 선택해주세요"})]})})})]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsx)(i.ZB,{children:"카메라 선택"})}),(0,t.jsx)(i.Wu,{className:"space-y-4",children:(0,t.jsxs)(d.l6,{value:s,onValueChange:a,children:[(0,t.jsx)(d.bq,{children:(0,t.jsx)(d.yv,{placeholder:"카메라를 선택하세요"})}),(0,t.jsx)(d.gC,{children:z.map(e=>(0,t.jsx)(d.eb,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("online"===e.status?"bg-green-500":"bg-red-500")}),e.name]})},e.id))})]})})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsx)(i.ZB,{children:"전체 카메라 목록"})}),(0,t.jsxs)(i.Wu,{className:"space-y-3",children:[z.map(e=>(0,t.jsxs)("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors ".concat(s===e.id?"border-purple-300 bg-purple-50":"border-gray-200 hover:border-gray-300"),onClick:()=>a(e.id),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("online"===e.status?"bg-green-500":"bg-red-500"," ").concat("online"===e.status?"animate-pulse":"")}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.location})]})]}),(0,t.jsx)(n.E,{variant:"online"===e.status?"default":"destructive",className:"text-xs",children:"online"===e.status?"온라인":"오프라인"})]}),"online"===e.status&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[e.resolution," • ",e.fps,"fps"]}),"offline"===e.status&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-red-500",children:["마지막 연결: ",D(e.lastUpdate)]})]},e.id)),0===z.length&&(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(o.A,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),(0,t.jsx)("p",{className:"text-sm",children:"등록된 카메라가 없습니다."})]})]})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(j.A,{className:"h-5 w-5"}),"카메라 설정"]})}),(0,t.jsxs)(i.Wu,{className:"space-y-3",children:[(0,t.jsxs)(r.$,{variant:"outline",className:"w-full justify-start",size:"sm",children:[(0,t.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"새 카메라 추가"]}),(0,t.jsxs)(r.$,{variant:"outline",className:"w-full justify-start",size:"sm",children:[(0,t.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"카메라 설정"]}),(0,t.jsxs)(r.$,{variant:"outline",className:"w-full justify-start",size:"sm",children:[(0,t.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"전체 새로고침"]})]})]})]})]})]})]})}},42864:(e,s,a)=>{Promise.resolve().then(a.bind(a,39788))},88482:(e,s,a)=>{"use strict";a.d(s,{Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>n});var t=a(95155),l=a(12115),r=a(53999);let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});i.displayName="Card";let n=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...l})});n.displayName="CardHeader";let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});d.displayName="CardTitle",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",a),...l})}).displayName="CardDescription";let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",a),...l})});c.displayName="CardContent",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter"},95784:(e,s,a)=>{"use strict";a.d(s,{bq:()=>m,eb:()=>f,gC:()=>p,l6:()=>o,yv:()=>x});var t=a(95155),l=a(12115),r=a(77320),i=a(66474),n=a(47863),d=a(5196),c=a(53999);let o=r.bL;r.YJ;let x=r.WT,m=l.forwardRef((e,s)=>{let{className:a,children:l,...n}=e;return(0,t.jsxs)(r.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[l,(0,t.jsx)(r.In,{asChild:!0,children:(0,t.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.l9.displayName;let h=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})});h.displayName=r.PP.displayName;let u=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});u.displayName=r.wn.displayName;let p=l.forwardRef((e,s)=>{let{className:a,children:l,position:i="popper",...n}=e;return(0,t.jsx)(r.ZL,{children:(0,t.jsxs)(r.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,t.jsx)(h,{}),(0,t.jsx)(r.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,t.jsx)(u,{})]})})});p.displayName=r.UC.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=r.JU.displayName;let f=l.forwardRef((e,s)=>{let{className:a,children:l,...i}=e;return(0,t.jsxs)(r.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.VF,{children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})}),(0,t.jsx)(r.p4,{children:l})]})});f.displayName=r.q7.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=r.wv.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[96,751,358],()=>s(42864)),_N_E=e.O()}]);