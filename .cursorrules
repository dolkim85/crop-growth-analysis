1] í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°
/backend
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ routes/               # API ì—”ë“œí¬ì¸íŠ¸
â”‚   â”‚   â””â”€â”€ analyze.py
â”‚   â”œâ”€â”€ services/             # AI ë¶„ì„, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â””â”€â”€ ai.py
â”‚   â”œâ”€â”€ models/               # ë°ì´í„° ëª¨ë¸ (í•„ìš” ì‹œ)
â”‚   â”‚   â””â”€â”€ plant.py
â”‚   â”œâ”€â”€ utils/                # ê³µìš© ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â””â”€â”€ logger.py
â”‚   â””â”€â”€ config.py             # í™˜ê²½ ì„¤ì •
â”œâ”€â”€ run.py                    # Flask ì‹¤í–‰ ì§„ì…ì 
â”œâ”€â”€ requirements.txt          # ì˜ì¡´ì„± ëª©ë¡
â”œâ”€â”€ .env                      # í™˜ê²½ë³€ìˆ˜ ì„¤ì •
â”œâ”€â”€ .gitignore                # Git ì œì™¸ í•­ëª©
â””â”€â”€ uploads/                  # ì´ë¯¸ì§€ ì €ì¥ í´ë”

[2] .env íŒŒì¼ (í™˜ê²½ë³€ìˆ˜ ì„¤ì •)
FLASK_ENV=development
SECRET_KEY=mysecret
AI_MODEL_PATH=./models/myplantmodel.pt
UPLOAD_FOLDER=./uploads

ğŸ“¦ [3] requirements.txt
Flask
flask-cors
python-dotenv
torch
opencv-python
pillow
numpy

ğŸš€ [4] run.py (ì„œë²„ ì‹¤í–‰ ì§„ì…ì )
from flask import Flask
from flask_cors import CORS
from app.routes.analyze import analyze_bp
from dotenv import load_dotenv
import os

load_dotenv()

app = Flask(__name__)
CORS(app)

app.config['UPLOAD_FOLDER'] = os.getenv("UPLOAD_FOLDER")
app.config['SECRET_KEY'] = os.getenv("SECRET_KEY")

# ë¸”ë£¨í”„ë¦°íŠ¸ ë“±ë¡
app.register_blueprint(analyze_bp)

if __name__ == "__main__":
    app.run(debug=True, host="0.0.0.0", port=5000)

ğŸŒ [5] routes/analyze.py (ë¶„ì„ API)
from flask import Blueprint, request, jsonify
from app.services.ai import analyze_plant_image
import os
import uuid

analyze_bp = Blueprint("analyze", __name__, url_prefix="/api/v1")

@analyze_bp.route("/analyze", methods=["POST"])
def analyze():
    if 'image' not in request.files:
        return jsonify({"status": "error", "message": "No image uploaded"}), 400

    image = request.files['image']
    filename = f"{uuid.uuid4()}.jpg"
    filepath = os.path.join(os.getenv("UPLOAD_FOLDER"), filename)
    image.save(filepath)

    try:
        result = analyze_plant_image(filepath)
        return jsonify({"status": "success", "message": "ë¶„ì„ ì™„ë£Œ", "data": result})
    except Exception as e:
        return jsonify({"status": "error", "message": str(e)}), 500

ğŸ§  [6] services/ai.py (AI ë¶„ì„ ë¡œì§)
from PIL import Image
import torch

def analyze_plant_image(image_path):
    # 1. ëª¨ë¸ ë¶ˆëŸ¬ì˜¤ê¸°
    model = torch.load("models/myplantmodel.pt")
    model.eval()

    # 2. ì´ë¯¸ì§€ ì „ì²˜ë¦¬
    image = Image.open(image_path).convert("RGB")
    # ì—¬ê¸°ì„œ ì „ì²˜ë¦¬ ì½”ë“œ ì‚½ì… (ì˜ˆ: resize, normalization ë“±)

    # 3. ì¶”ë¡ 
    # ì˜ˆì‹œìš© ê°€ì§œ ë¦¬í„´ê°’
    return {
        "health": "ì¢‹ìŒ",
        "growth": "ì •ìƒ",
        "recommend": "ë¬¼ ì£¼ê¸° í•„ìš”"
    }


ğŸ” [7] API ì‘ë‹µ í˜•ì‹ ê·œì¹™
ëª¨ë“  ì‘ë‹µì€ ë‹¤ìŒ êµ¬ì¡°ë¥¼ ë”°ë¦…ë‹ˆë‹¤:
{
  "status": "success",
  "message": "ë¶„ì„ ì™„ë£Œ",
  "data": {
    "health": "ì¢‹ìŒ",
    "growth": "ì •ìƒ",
    "recommend": "ë¬¼ ì£¼ê¸° í•„ìš”"
  }
}
ì—ëŸ¬ ë°œìƒ ì‹œ:
{
  "status": "error",
  "message": "ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"
}

ğŸ§¹ [8] .gitignore (Git ì œì™¸ ëª©ë¡)
__pycache__/
*.pyc
.env
uploads/
models/

ğŸ§ª [9] API í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ (curl)
curl -X POST http://localhost:5000/api/v1/analyze \
  -F "image=@./test_images/leaf.jpg"

ğŸ“š [10] ê¸°ë³¸ ì‚¬ìš© ê·œì¹™ ìš”ì•½
| í•­ëª©         | ê·œì¹™                                   |
| ---------- | ------------------------------------ |
| API Prefix | `/api/v1/`                           |
| ì—…ë¡œë“œ íŒŒì¼ ìœ„ì¹˜  | `.env`ì˜ `UPLOAD_FOLDER` ê¸°ì¤€           |
| ì´ë¯¸ì§€ ì²˜ë¦¬ ìˆœì„œ  | ì €ì¥ â†’ ê²½ë¡œ ì „ë‹¬ â†’ ë¶„ì„ í›„ dict ë°˜í™˜            |
| AI ë¶„ì„ ëª¨ë“ˆ   | `services/ai.py` ì—ë§Œ ì‘ì„±, Flask ì½”ë“œì™€ ë¶„ë¦¬ |
| ëª¨ë¸ ìœ„ì¹˜      | `models/` í´ë” ë‚´ `.pt` íŒŒì¼              |

